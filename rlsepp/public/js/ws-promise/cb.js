'use strict';function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x["default"]:x}function getAugmentedNamespace(n){if(n.__esModule)return n;var a=Object.defineProperty({},"__esModule",{value:true});Object.keys(n).forEach(function(k){var d=Object.getOwnPropertyDescriptor(n,k);Object.defineProperty(a,k,d.get?d:{enumerable:true,get:function(){return n[k]}})});return a}var msgpackLite={};var encode$3={};var encodeBuffer={};var writeCore={};var extBuffer={};var bufferish={};var global$1=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var inited=false;function init$2(){inited=true;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63}function toByteArray(b64){if(!inited){init$2()}var i,j,l,tmp,placeHolders,arr;var len=b64.length;if(len%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}placeHolders=b64[len-2]==="="?2:b64[len-1]==="="?1:0;arr=new Arr(len*3/4-placeHolders);l=placeHolders>0?len-4:len;var L=0;for(i=0,j=0;i<l;i+=4,j+=3){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[L++]=tmp>>16&255;arr[L++]=tmp>>8&255;arr[L++]=tmp&255}if(placeHolders===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[L++]=tmp&255}else if(placeHolders===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[L++]=tmp>>8&255;arr[L++]=tmp&255}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){if(!inited){init$2()}var tmp;var len=uint8.length;var extraBytes=len%3;var output="";var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength))}if(extraBytes===1){tmp=uint8[len-1];output+=lookup[tmp>>2];output+=lookup[tmp<<4&63];output+="=="}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];output+=lookup[tmp>>10];output+=lookup[tmp>>4&63];output+=lookup[tmp<<2&63];output+="="}parts.push(output);return parts.join("")}function read$2(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)}function write$2(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}var toString$3={}.toString;var isArray$1=Array.isArray||function(arr){return toString$3.call(arr)=="[object Array]"};var INSPECT_MAX_BYTES=50;Buffer$5.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT!==undefined?global$1.TYPED_ARRAY_SUPPORT:true;function kMaxLength(){return Buffer$5.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length){throw new RangeError("Invalid typed array length")}if(Buffer$5.TYPED_ARRAY_SUPPORT){that=new Uint8Array(length);that.__proto__=Buffer$5.prototype}else{if(that===null){that=new Buffer$5(length)}that.length=length}return that}function Buffer$5(arg,encodingOrOffset,length){if(!Buffer$5.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer$5)){return new Buffer$5(arg,encodingOrOffset,length)}if(typeof arg==="number"){if(typeof encodingOrOffset==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return allocUnsafe(this,arg)}return from$3(this,arg,encodingOrOffset,length)}Buffer$5.poolSize=8192;Buffer$5._augment=function(arr){arr.__proto__=Buffer$5.prototype;return arr};function from$3(that,value,encodingOrOffset,length){if(typeof value==="number"){throw new TypeError("\"value\" argument must not be a number")}if(typeof ArrayBuffer!=="undefined"&&value instanceof ArrayBuffer){return fromArrayBuffer(that,value,encodingOrOffset,length)}if(typeof value==="string"){return fromString(that,value,encodingOrOffset)}return fromObject(that,value)}Buffer$5.from=function(value,encodingOrOffset,length){return from$3(null,value,encodingOrOffset,length)};if(Buffer$5.TYPED_ARRAY_SUPPORT){Buffer$5.prototype.__proto__=Uint8Array.prototype;Buffer$5.__proto__=Uint8Array}function assertSize(size){if(typeof size!=="number"){throw new TypeError("\"size\" argument must be a number")}else if(size<0){throw new RangeError("\"size\" argument must not be negative")}}function alloc$3(that,size,fill,encoding){assertSize(size);if(size<=0){return createBuffer(that,size)}if(fill!==undefined){return typeof encoding==="string"?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill)}return createBuffer(that,size)}Buffer$5.alloc=function(size,fill,encoding){return alloc$3(null,size,fill,encoding)};function allocUnsafe(that,size){assertSize(size);that=createBuffer(that,size<0?0:checked(size)|0);if(!Buffer$5.TYPED_ARRAY_SUPPORT){for(var i=0;i<size;++i){that[i]=0}}return that}Buffer$5.allocUnsafe=function(size){return allocUnsafe(null,size)};Buffer$5.allocUnsafeSlow=function(size){return allocUnsafe(null,size)};function fromString(that,string,encoding){if(typeof encoding!=="string"||encoding===""){encoding="utf8"}if(!Buffer$5.isEncoding(encoding)){throw new TypeError("\"encoding\" must be a valid string encoding")}var length=byteLength(string,encoding)|0;that=createBuffer(that,length);var actual=that.write(string,encoding);if(actual!==length){that=that.slice(0,actual)}return that}function fromArrayLike(that,array){var length=array.length<0?0:checked(array.length)|0;that=createBuffer(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}function fromArrayBuffer(that,array,byteOffset,length){array.byteLength;if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError("'offset' is out of bounds")}if(array.byteLength<byteOffset+(length||0)){throw new RangeError("'length' is out of bounds")}if(byteOffset===undefined&&length===undefined){array=new Uint8Array(array)}else if(length===undefined){array=new Uint8Array(array,byteOffset)}else{array=new Uint8Array(array,byteOffset,length)}if(Buffer$5.TYPED_ARRAY_SUPPORT){that=array;that.__proto__=Buffer$5.prototype}else{that=fromArrayLike(that,array)}return that}function fromObject(that,obj){if(internalIsBuffer(obj)){var len=checked(obj.length)|0;that=createBuffer(that,len);if(that.length===0){return that}obj.copy(that,0,0,len);return that}if(obj){if(typeof ArrayBuffer!=="undefined"&&obj.buffer instanceof ArrayBuffer||"length"in obj){if(typeof obj.length!=="number"||isnan(obj.length)){return createBuffer(that,0)}return fromArrayLike(that,obj)}if(obj.type==="Buffer"&&isArray$1(obj.data)){return fromArrayLike(that,obj.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(length){if(length>=kMaxLength()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+kMaxLength().toString(16)+" bytes")}return length|0}Buffer$5.isBuffer=isBuffer$1;function internalIsBuffer(b){return!!(b!=null&&b._isBuffer)}Buffer$5.compare=function compare(a,b){if(!internalIsBuffer(a)||!internalIsBuffer(b)){throw new TypeError("Arguments must be Buffers")}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};Buffer$5.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false;}};Buffer$5.concat=function concat(list,length){if(!isArray$1(list)){throw new TypeError("\"list\" argument must be an Array of Buffers")}if(list.length===0){return Buffer$5.alloc(0)}var i;if(length===undefined){length=0;for(i=0;i<list.length;++i){length+=list[i].length}}var buffer=Buffer$5.allocUnsafe(length);var pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!internalIsBuffer(buf)){throw new TypeError("\"list\" argument must be an Array of Buffers")}buf.copy(buffer,pos);pos+=buf.length}return buffer};function byteLength(string,encoding){if(internalIsBuffer(string)){return string.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer)){return string.byteLength}if(typeof string!=="string"){string=""+string}var len=string.length;if(len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case undefined:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase();loweredCase=true;}}}Buffer$5.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=false;if(start===undefined||start<0){start=0}if(start>this.length){return""}if(end===undefined||end>this.length){end=this.length}if(end<=0){return""}end>>>=0;start>>>=0;if(end<=start){return""}if(!encoding)encoding="utf8";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true;}}}Buffer$5.prototype._isBuffer=true;function swap(b,n,m){var i=b[n];b[n]=b[m];b[m]=i}Buffer$5.prototype.swap16=function swap16(){var len=this.length;if(len%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<len;i+=2){swap(this,i,i+1)}return this};Buffer$5.prototype.swap32=function swap32(){var len=this.length;if(len%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<len;i+=4){swap(this,i,i+3);swap(this,i+1,i+2)}return this};Buffer$5.prototype.swap64=function swap64(){var len=this.length;if(len%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var i=0;i<len;i+=8){swap(this,i,i+7);swap(this,i+1,i+6);swap(this,i+2,i+5);swap(this,i+3,i+4)}return this};Buffer$5.prototype.toString=function toString(){var length=this.length|0;if(length===0)return"";if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer$5.prototype.equals=function equals(b){if(!internalIsBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer$5.compare(this,b)===0};Buffer$5.prototype.inspect=function inspect(){var str="";var max=INSPECT_MAX_BYTES;if(this.length>0){str=this.toString("hex",0,max).match(/.{2}/g).join(" ");if(this.length>max)str+=" ... "}return"<Buffer "+str+">"};Buffer$5.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(!internalIsBuffer(target)){throw new TypeError("Argument must be a Buffer")}if(start===undefined){start=0}if(end===undefined){end=target?target.length:0}if(thisStart===undefined){thisStart=0}if(thisEnd===undefined){thisEnd=this.length}if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError("out of range index")}if(thisStart>=thisEnd&&start>=end){return 0}if(thisStart>=thisEnd){return-1}if(start>=end){return 1}start>>>=0;end>>>=0;thisStart>>>=0;thisEnd>>>=0;if(this===target)return 0;var x=thisEnd-thisStart;var y=end-start;var len=Math.min(x,y);var thisCopy=this.slice(thisStart,thisEnd);var targetCopy=target.slice(start,end);for(var i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i];y=targetCopy[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset==="string"){encoding=byteOffset;byteOffset=0}else if(byteOffset>2147483647){byteOffset=2147483647}else if(byteOffset<-2147483648){byteOffset=-2147483648}byteOffset=+byteOffset;if(isNaN(byteOffset)){byteOffset=dir?0:buffer.length-1}if(byteOffset<0)byteOffset=buffer.length+byteOffset;if(byteOffset>=buffer.length){if(dir)return-1;else byteOffset=buffer.length-1}else if(byteOffset<0){if(dir)byteOffset=0;else return-1}if(typeof val==="string"){val=Buffer$5.from(val,encoding)}if(internalIsBuffer(val)){if(val.length===0){return-1}return arrayIndexOf(buffer,val,byteOffset,encoding,dir)}else if(typeof val==="number"){val=val&255;if(Buffer$5.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(dir){return Uint8Array.prototype.indexOf.call(buffer,val,byteOffset)}else{return Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset)}}return arrayIndexOf(buffer,[val],byteOffset,encoding,dir)}throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1;var arrLength=arr.length;var valLength=val.length;if(encoding!==undefined){encoding=String(encoding).toLowerCase();if(encoding==="ucs2"||encoding==="ucs-2"||encoding==="utf16le"||encoding==="utf-16le"){if(arr.length<2||val.length<2){return-1}indexSize=2;arrLength/=2;valLength/=2;byteOffset/=2}}function read(buf,i){if(indexSize===1){return buf[i]}else{return buf.readUInt16BE(i*indexSize)}}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++){if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===valLength)return foundIndex*indexSize}else{if(foundIndex!==-1)i-=i-foundIndex;foundIndex=-1}}}else{if(byteOffset+valLength>arrLength)byteOffset=arrLength-valLength;for(i=byteOffset;i>=0;i--){var found=true;for(var j=0;j<valLength;j++){if(read(arr,i+j)!==read(val,j)){found=false;break}}if(found)return i}}return-1}Buffer$5.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1};Buffer$5.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,true)};Buffer$5.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,false)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(strLen%2!==0)throw new TypeError("Invalid hex string");if(length>strLen/2){length=strLen/2}for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer$5.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding="utf8";length=this.length;offset=0}else if(length===undefined&&typeof offset==="string"){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=offset|0;if(isFinite(length)){length=length|0;if(encoding===undefined)encoding="utf8"}else{encoding=length;length=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!encoding)encoding="utf8";var loweredCase=false;for(;;){switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true;}}};Buffer$5.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return fromByteArray(buf)}else{return fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<128){codePoint=firstByte}break;case 2:secondByte=buf[i+1];if((secondByte&192)===128){tempCodePoint=(firstByte&31)<<6|secondByte&63;if(tempCodePoint>127){codePoint=tempCodePoint}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&192)===128&&(thirdByte&192)===128){tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63;if(tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)){codePoint=tempCodePoint}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128){tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63;if(tempCodePoint>65535&&tempCodePoint<1114112){codePoint=tempCodePoint}}}}if(codePoint===null){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}var res="";var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]&127)}return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;++i){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer$5.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf;if(Buffer$5.TYPED_ARRAY_SUPPORT){newBuf=this.subarray(start,end);newBuf.__proto__=Buffer$5.prototype}else{var sliceLen=end-start;newBuf=new Buffer$5(sliceLen,undefined);for(var i=0;i<sliceLen;++i){newBuf[i]=this[i+start]}}return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer$5.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer$5.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert){checkOffset(offset,byteLength,this.length)}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer$5.prototype.readUInt8=function readUInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer$5.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer$5.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer$5.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer$5.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer$5.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer$5.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer$5.prototype.readInt8=function readInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer$5.prototype.readInt16LE=function readInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer$5.prototype.readInt16BE=function readInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer$5.prototype.readInt32LE=function readInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer$5.prototype.readInt32BE=function readInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer$5.prototype.readFloatLE=function readFloatLE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return read$2(this,offset,true,23,4)};Buffer$5.prototype.readFloatBE=function readFloatBE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return read$2(this,offset,false,23,4)};Buffer$5.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return read$2(this,offset,true,52,8)};Buffer$5.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return read$2(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!internalIsBuffer(buf))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(value>max||value<min)throw new RangeError("\"value\" argument is out of bounds");if(offset+ext>buf.length)throw new RangeError("Index out of range")}Buffer$5.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer$5.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer$5.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,255,0);if(!Buffer$5.TYPED_ARRAY_SUPPORT)value=Math.floor(value);this[offset]=value&255;return offset+1};function objectWriteUInt16(buf,value,offset,littleEndian){if(value<0)value=65535+value+1;for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i){buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8}}Buffer$5.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer$5.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer$5.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer$5.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};function objectWriteUInt32(buf,value,offset,littleEndian){if(value<0)value=4294967295+value+1;for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i){buf[offset+i]=value>>>(littleEndian?i:3-i)*8&255}}Buffer$5.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer$5.TYPED_ARRAY_SUPPORT){this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&255}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer$5.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer$5.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};Buffer$5.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer$5.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer$5.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(!Buffer$5.TYPED_ARRAY_SUPPORT)value=Math.floor(value);if(value<0)value=255+value+1;this[offset]=value&255;return offset+1};Buffer$5.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer$5.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer$5.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer$5.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};Buffer$5.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(Buffer$5.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer$5.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;if(Buffer$5.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,4)}write$2(buf,value,offset,littleEndian,23,4);return offset+4}Buffer$5.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer$5.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,8)}write$2(buf,value,offset,littleEndian,52,8);return offset+8}Buffer$5.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer$5.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer$5.prototype.copy=function copy(target,targetStart,start,end){if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start}var len=end-start;var i;if(this===target&&start<targetStart&&targetStart<end){for(i=len-1;i>=0;--i){target[i+targetStart]=this[i+start]}}else if(len<1000||!Buffer$5.TYPED_ARRAY_SUPPORT){for(i=0;i<len;++i){target[i+targetStart]=this[i+start]}}else{Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart)}return len};Buffer$5.prototype.fill=function fill(val,start,end,encoding){if(typeof val==="string"){if(typeof start==="string"){encoding=start;start=0;end=this.length}else if(typeof end==="string"){encoding=end;end=this.length}if(val.length===1){var code=val.charCodeAt(0);if(code<256){val=code}}if(encoding!==undefined&&typeof encoding!=="string"){throw new TypeError("encoding must be a string")}if(typeof encoding==="string"&&!Buffer$5.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}}else if(typeof val==="number"){val=val&255}if(start<0||this.length<start||this.length<end){throw new RangeError("Out of range index")}if(end<=start){return this}start=start>>>0;end=end===undefined?this.length:end>>>0;if(!val)val=0;var i;if(typeof val==="number"){for(i=start;i<end;++i){this[i]=val}}else{var bytes=internalIsBuffer(val)?val:utf8ToBytes(new Buffer$5(val,encoding).toString());var len=bytes.length;for(i=0;i<end-start;++i){this[i+start]=bytes[i%len]}}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(str){str=stringtrim(str).replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,"")}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;++i){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189)}leadSurrogate=null;if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;++i){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;++i){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;++i){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function isnan(val){return val!==val}function isBuffer$1(obj){return obj!=null&&(!!obj._isBuffer||isFastBuffer(obj)||isSlowBuffer(obj))}function isFastBuffer(obj){return!!obj.constructor&&typeof obj.constructor.isBuffer==="function"&&obj.constructor.isBuffer(obj)}function isSlowBuffer(obj){return typeof obj.readFloatLE==="function"&&typeof obj.slice==="function"&&isFastBuffer(obj.slice(0,0))}module.exports=c("undefined"!==typeof Buffer$5&&Buffer$5)||c(undefined.Buffer)||c("undefined"!==typeof window&&window.Buffer)||undefined.Buffer;function c(B){return B&&B.isBuffer&&B}var bufferGlobal=Object.freeze({__proto__:null});var require$$0$2=getAugmentedNamespace(bufferGlobal);var toString$2={}.toString;var isarray=Array.isArray||function(arr){return toString$2.call(arr)=="[object Array]"};var bufferishArray={exports:{}};var Bufferish$b=bufferish;var exports$3=bufferishArray.exports=alloc$2(0);exports$3.alloc=alloc$2;exports$3.concat=Bufferish$b.concat;exports$3.from=from$2;function alloc$2(size){return new Array(size)}function from$2(value){if(!Bufferish$b.isBuffer(value)&&Bufferish$b.isView(value)){value=Bufferish$b.Uint8Array.from(value)}else if(Bufferish$b.isArrayBuffer(value)){value=new Uint8Array(value)}else if(typeof value==="string"){return Bufferish$b.from.call(exports$3,value)}else if(typeof value==="number"){throw new TypeError("\"value\" argument must not be a number")}return Array.prototype.slice.call(value)}var bufferishBuffer={exports:{}};var Bufferish$a=bufferish;var Buffer$4=Bufferish$a.global;var exports$2=bufferishBuffer.exports=Bufferish$a.hasBuffer?alloc$1(0):[];exports$2.alloc=Bufferish$a.hasBuffer&&Buffer$4.alloc||alloc$1;exports$2.concat=Bufferish$a.concat;exports$2.from=from$1;function alloc$1(size){return new Buffer$4(size)}function from$1(value){if(!Bufferish$a.isBuffer(value)&&Bufferish$a.isView(value)){value=Bufferish$a.Uint8Array.from(value)}else if(Bufferish$a.isArrayBuffer(value)){value=new Uint8Array(value)}else if(typeof value==="string"){return Bufferish$a.from.call(exports$2,value)}else if(typeof value==="number"){throw new TypeError("\"value\" argument must not be a number")}if(Buffer$4.from&&Buffer$4.from.length!==1){return Buffer$4.from(value)}else{return new Buffer$4(value)}}var bufferishUint8array={exports:{}};var Bufferish$9=bufferish;var exports$1=bufferishUint8array.exports=Bufferish$9.hasArrayBuffer?alloc(0):[];exports$1.alloc=alloc;exports$1.concat=Bufferish$9.concat;exports$1.from=from;function alloc(size){return new Uint8Array(size)}function from(value){if(Bufferish$9.isView(value)){var byteOffset=value.byteOffset;var byteLength=value.byteLength;value=value.buffer;if(value.byteLength!==byteLength){if(value.slice){value=value.slice(byteOffset,byteOffset+byteLength)}else{value=new Uint8Array(value);if(value.byteLength!==byteLength){value=Array.prototype.slice.call(value,byteOffset,byteOffset+byteLength)}}}}else if(typeof value==="string"){return Bufferish$9.from.call(exports$1,value)}else if(typeof value==="number"){throw new TypeError("\"value\" argument must not be a number")}return new Uint8Array(value)}var bufferishProto={};var bufferLite={};bufferLite.copy=copy$1;bufferLite.toString=toString$1;bufferLite.write=write$1;function write$1(string,offset){var buffer=this;var index=offset||(offset|=0);var length=string.length;var chr=0;var i=0;while(i<length){chr=string.charCodeAt(i++);if(chr<128){buffer[index++]=chr}else if(chr<2048){buffer[index++]=192|chr>>>6;buffer[index++]=128|chr&63}else if(chr<55296||chr>57343){buffer[index++]=224|chr>>>12;buffer[index++]=128|chr>>>6&63;buffer[index++]=128|chr&63}else{chr=(chr-55296<<10|string.charCodeAt(i++)-56320)+65536;buffer[index++]=240|chr>>>18;buffer[index++]=128|chr>>>12&63;buffer[index++]=128|chr>>>6&63;buffer[index++]=128|chr&63}}return index-offset}function toString$1(encoding,start,end){var buffer=this;var index=start|0;if(!end)end=buffer.length;var string="";var chr=0;while(index<end){chr=buffer[index++];if(chr<128){string+=String.fromCharCode(chr);continue}if((chr&224)===192){chr=(chr&31)<<6|buffer[index++]&63}else if((chr&240)===224){chr=(chr&15)<<12|(buffer[index++]&63)<<6|buffer[index++]&63}else if((chr&248)===240){chr=(chr&7)<<18|(buffer[index++]&63)<<12|(buffer[index++]&63)<<6|buffer[index++]&63}if(chr>=65536){chr-=65536;string+=String.fromCharCode((chr>>>10)+55296,(chr&1023)+56320)}else{string+=String.fromCharCode(chr)}}return string}function copy$1(target,targetStart,start,end){var i;if(!start)start=0;if(!end&&end!==0)end=this.length;if(!targetStart)targetStart=0;var len=end-start;if(target===this&&start<targetStart&&targetStart<end){for(i=len-1;i>=0;i--){target[i+targetStart]=this[i+start]}}else{for(i=0;i<len;i++){target[i+targetStart]=this[i+start]}}return len}var BufferLite=bufferLite;bufferishProto.copy=copy;bufferishProto.slice=slice$1;bufferishProto.toString=toString;bufferishProto.write=gen("write");var Bufferish$8=bufferish;var Buffer$3=Bufferish$8.global;var isBufferShim=Bufferish$8.hasBuffer&&"TYPED_ARRAY_SUPPORT"in Buffer$3;var brokenTypedArray=isBufferShim&&!Buffer$3.TYPED_ARRAY_SUPPORT;function copy(target,targetStart,start,end){var thisIsBuffer=Bufferish$8.isBuffer(this);var targetIsBuffer=Bufferish$8.isBuffer(target);if(thisIsBuffer&&targetIsBuffer){return this.copy(target,targetStart,start,end)}else if(!brokenTypedArray&&!thisIsBuffer&&!targetIsBuffer&&Bufferish$8.isView(this)&&Bufferish$8.isView(target)){var buffer=start||end!=null?slice$1.call(this,start,end):this;target.set(buffer,targetStart);return buffer.length}else{return BufferLite.copy.call(this,target,targetStart,start,end)}}function slice$1(start,end){var f=this.slice||!brokenTypedArray&&this.subarray;if(f)return f.call(this,start,end);var target=Bufferish$8.alloc.call(this,end-start);copy.call(this,target,0,start,end);return target}function toString(encoding,start,end){var f=!isBufferShim&&Bufferish$8.isBuffer(this)?this.toString:BufferLite.toString;return f.apply(this,arguments)}function gen(method){return wrap;function wrap(){var f=this[method]||BufferLite[method];return f.apply(this,arguments)}}(function(exports){var Buffer=exports.global=require$$0$2;var hasBuffer=exports.hasBuffer=Buffer&&!!Buffer.isBuffer;var hasArrayBuffer=exports.hasArrayBuffer="undefined"!==typeof ArrayBuffer;var isArray=exports.isArray=isarray;exports.isArrayBuffer=hasArrayBuffer?isArrayBuffer:_false;var isBuffer=exports.isBuffer=hasBuffer?Buffer.isBuffer:_false;var isView=exports.isView=hasArrayBuffer?ArrayBuffer.isView||_is("ArrayBuffer","buffer"):_false;exports.alloc=alloc;exports.concat=concat;exports.from=from;var BufferArray=exports.Array=bufferishArray.exports;var BufferBuffer=exports.Buffer=bufferishBuffer.exports;var BufferUint8Array=exports.Uint8Array=bufferishUint8array.exports;var BufferProto=exports.prototype=bufferishProto;function from(value){if(typeof value==="string"){return fromString.call(this,value)}else{return auto(this).from(value)}}function alloc(size){return auto(this).alloc(size)}function concat(list,length){if(!length){length=0;Array.prototype.forEach.call(list,dryrun)}var ref=this!==exports&&this||list[0];var result=alloc.call(ref,length);var offset=0;Array.prototype.forEach.call(list,append);return result;function dryrun(buffer){length+=buffer.length}function append(buffer){offset+=BufferProto.copy.call(buffer,result,offset)}}var _isArrayBuffer=_is("ArrayBuffer");function isArrayBuffer(value){return value instanceof ArrayBuffer||_isArrayBuffer(value)}function fromString(value){var expected=value.length*3;var that=alloc.call(this,expected);var actual=BufferProto.write.call(that,value);if(expected!==actual){that=BufferProto.slice.call(that,0,actual)}return that}function auto(that){return isBuffer(that)?BufferBuffer:isView(that)?BufferUint8Array:isArray(that)?BufferArray:hasBuffer?BufferBuffer:hasArrayBuffer?BufferUint8Array:BufferArray}function _false(){return false}function _is(name,key){name="[object "+name+"]";return function(value){return value!=null&&{}.toString.call(key?value[key]:value)===name}}})(bufferish);extBuffer.ExtBuffer=ExtBuffer$3;var Bufferish$7=bufferish;function ExtBuffer$3(buffer,type){if(!(this instanceof ExtBuffer$3))return new ExtBuffer$3(buffer,type);this.buffer=Bufferish$7.from(buffer);this.type=type}var extPacker={};extPacker.setExtPackers=setExtPackers;var Bufferish$6=bufferish;var Buffer$2=Bufferish$6.global;var packTypedArray=Bufferish$6.Uint8Array.from;var _encode;var ERROR_COLUMNS$1={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function setExtPackers(codec){codec.addExtPacker(14,Error,[packError,encode$2]);codec.addExtPacker(1,EvalError,[packError,encode$2]);codec.addExtPacker(2,RangeError,[packError,encode$2]);codec.addExtPacker(3,ReferenceError,[packError,encode$2]);codec.addExtPacker(4,SyntaxError,[packError,encode$2]);codec.addExtPacker(5,TypeError,[packError,encode$2]);codec.addExtPacker(6,URIError,[packError,encode$2]);codec.addExtPacker(10,RegExp,[packRegExp,encode$2]);codec.addExtPacker(11,Boolean,[packValueOf,encode$2]);codec.addExtPacker(12,String,[packValueOf,encode$2]);codec.addExtPacker(13,Date,[Number,encode$2]);codec.addExtPacker(15,Number,[packValueOf,encode$2]);if("undefined"!==typeof Uint8Array){codec.addExtPacker(17,Int8Array,packTypedArray);codec.addExtPacker(18,Uint8Array,packTypedArray);codec.addExtPacker(19,Int16Array,packTypedArray);codec.addExtPacker(20,Uint16Array,packTypedArray);codec.addExtPacker(21,Int32Array,packTypedArray);codec.addExtPacker(22,Uint32Array,packTypedArray);codec.addExtPacker(23,Float32Array,packTypedArray);if("undefined"!==typeof Float64Array){codec.addExtPacker(24,Float64Array,packTypedArray)}if("undefined"!==typeof Uint8ClampedArray){codec.addExtPacker(25,Uint8ClampedArray,packTypedArray)}codec.addExtPacker(26,ArrayBuffer,packTypedArray);codec.addExtPacker(29,DataView,packTypedArray)}if(Bufferish$6.hasBuffer){codec.addExtPacker(27,Buffer$2,Bufferish$6.from)}}function encode$2(input){if(!_encode)_encode=encode$3.encode;return _encode(input)}function packValueOf(value){return value.valueOf()}function packRegExp(value){value=RegExp.prototype.toString.call(value).split("/");value.shift();var out=[value.pop()];out.unshift(value.join("/"));return out}function packError(value){var out={};for(var key in ERROR_COLUMNS$1){out[key]=value[key]}return out}var writeType={};!function(exports){var UNDEFINED="undefined";var BUFFER=UNDEFINED!==typeof Buffer$5&&Buffer$5;var UINT8ARRAY=UNDEFINED!==typeof Uint8Array&&Uint8Array;var ARRAYBUFFER=UNDEFINED!==typeof ArrayBuffer&&ArrayBuffer;var ZERO=[0,0,0,0,0,0,0,0];var isArray=Array.isArray||_isArray;var BIT32=4294967296;var BIT24=16777216;var storage;factory("Uint64BE",true,true);factory("Int64BE",true,false);factory("Uint64LE",false,true);factory("Int64LE",false,false);function factory(name,bigendian,unsigned){var posH=bigendian?0:4;var posL=bigendian?4:0;var pos0=bigendian?0:3;var pos1=bigendian?1:2;var pos2=bigendian?2:1;var pos3=bigendian?3:0;var fromPositive=bigendian?fromPositiveBE:fromPositiveLE;var fromNegative=bigendian?fromNegativeBE:fromNegativeLE;var proto=Int64.prototype;var isName="is"+name;var _isInt64="_"+isName;proto.buffer=void 0;proto.offset=0;proto[_isInt64]=true;proto.toNumber=toNumber;proto.toString=toString;proto.toJSON=toNumber;proto.toArray=toArray;if(BUFFER)proto.toBuffer=toBuffer;if(UINT8ARRAY)proto.toArrayBuffer=toArrayBuffer;Int64[isName]=isInt64;exports[name]=Int64;return Int64;function Int64(buffer,offset,value,raddix){if(!(this instanceof Int64))return new Int64(buffer,offset,value,raddix);return init(this,buffer,offset,value,raddix)}function isInt64(b){return!!(b&&b[_isInt64])}function init(that,buffer,offset,value,raddix){if(UINT8ARRAY&&ARRAYBUFFER){if(buffer instanceof ARRAYBUFFER)buffer=new UINT8ARRAY(buffer);if(value instanceof ARRAYBUFFER)value=new UINT8ARRAY(value)}if(!buffer&&!offset&&!value&&!storage){that.buffer=newArray(ZERO,0);return}if(!isValidBuffer(buffer,offset)){var _storage=storage||Array;raddix=offset;value=buffer;offset=0;buffer=new _storage(8)}that.buffer=buffer;that.offset=offset|=0;if(UNDEFINED===typeof value)return;if("string"===typeof value){fromString(buffer,offset,value,raddix||10)}else if(isValidBuffer(value,raddix)){fromArray(buffer,offset,value,raddix)}else if("number"===typeof raddix){writeInt32(buffer,offset+posH,value);writeInt32(buffer,offset+posL,raddix)}else if(value>0){fromPositive(buffer,offset,value)}else if(value<0){fromNegative(buffer,offset,value)}else{fromArray(buffer,offset,ZERO,0)}}function fromString(buffer,offset,str,raddix){var pos=0;var len=str.length;var high=0;var low=0;if(str[0]==="-")pos++;var sign=pos;while(pos<len){var chr=parseInt(str[pos++],raddix);if(!(chr>=0))break;low=low*raddix+chr;high=high*raddix+Math.floor(low/BIT32);low%=BIT32}if(sign){high=~high;if(low){low=BIT32-low}else{high++}}writeInt32(buffer,offset+posH,high);writeInt32(buffer,offset+posL,low)}function toNumber(){var buffer=this.buffer;var offset=this.offset;var high=readInt32(buffer,offset+posH);var low=readInt32(buffer,offset+posL);if(!unsigned)high|=0;return high?high*BIT32+low:low}function toString(radix){var buffer=this.buffer;var offset=this.offset;var high=readInt32(buffer,offset+posH);var low=readInt32(buffer,offset+posL);var str="";var sign=!unsigned&&high&2147483648;if(sign){high=~high;low=BIT32-low}radix=radix||10;while(1){var mod=high%radix*BIT32+low;high=Math.floor(high/radix);low=Math.floor(mod/radix);str=(mod%radix).toString(radix)+str;if(!high&&!low)break}if(sign){str="-"+str}return str}function writeInt32(buffer,offset,value){buffer[offset+pos3]=value&255;value=value>>8;buffer[offset+pos2]=value&255;value=value>>8;buffer[offset+pos1]=value&255;value=value>>8;buffer[offset+pos0]=value&255}function readInt32(buffer,offset){return buffer[offset+pos0]*BIT24+(buffer[offset+pos1]<<16)+(buffer[offset+pos2]<<8)+buffer[offset+pos3]}}function toArray(raw){var buffer=this.buffer;var offset=this.offset;storage=null;if(raw!==false&&offset===0&&buffer.length===8&&isArray(buffer))return buffer;return newArray(buffer,offset)}function toBuffer(raw){var buffer=this.buffer;var offset=this.offset;storage=BUFFER;if(raw!==false&&offset===0&&buffer.length===8&&Buffer$5.isBuffer(buffer))return buffer;var dest=new BUFFER(8);fromArray(dest,0,buffer,offset);return dest}function toArrayBuffer(raw){var buffer=this.buffer;var offset=this.offset;var arrbuf=buffer.buffer;storage=UINT8ARRAY;if(raw!==false&&offset===0&&arrbuf instanceof ARRAYBUFFER&&arrbuf.byteLength===8)return arrbuf;var dest=new UINT8ARRAY(8);fromArray(dest,0,buffer,offset);return dest.buffer}function isValidBuffer(buffer,offset){var len=buffer&&buffer.length;offset|=0;return len&&offset+8<=len&&"string"!==typeof buffer[offset]}function fromArray(destbuf,destoff,srcbuf,srcoff){destoff|=0;srcoff|=0;for(var i=0;i<8;i++){destbuf[destoff++]=srcbuf[srcoff++]&255}}function newArray(buffer,offset){return Array.prototype.slice.call(buffer,offset,offset+8)}function fromPositiveBE(buffer,offset,value){var pos=offset+8;while(pos>offset){buffer[--pos]=value&255;value/=256}}function fromNegativeBE(buffer,offset,value){var pos=offset+8;value++;while(pos>offset){buffer[--pos]=-value&255^255;value/=256}}function fromPositiveLE(buffer,offset,value){var end=offset+8;while(offset<end){buffer[offset++]=value&255;value/=256}}function fromNegativeLE(buffer,offset,value){var end=offset+8;value++;while(offset<end){buffer[offset++]=-value&255^255;value/=256}}function _isArray(val){return!!val&&"[object Array]"==Object.prototype.toString.call(val)}}(typeof exports==="object"&&typeof exports.nodeName!=="string"?exports:undefined||{});var int64Buffer=Object.freeze({__proto__:null});var require$$1$2=getAugmentedNamespace(int64Buffer);var writeToken={};var ieee754$2={};ieee754$2.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};ieee754$2.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128};var writeUint8={};var constant$1=writeUint8.uint8=new Array(256);for(var i$1=0;i$1<=255;i$1++){constant$1[i$1]=write0(i$1)}function write0(type){return function(encoder){var offset=encoder.reserve(1);encoder.buffer[offset]=type}}var ieee754$1=ieee754$2;var Int64Buffer$2=require$$1$2;var Uint64BE$2=Int64Buffer$2.Uint64BE;var Int64BE$2=Int64Buffer$2.Int64BE;var uint8$2=writeUint8.uint8;var Bufferish$5=bufferish;var Buffer$1=Bufferish$5.global;var IS_BUFFER_SHIM=Bufferish$5.hasBuffer&&"TYPED_ARRAY_SUPPORT"in Buffer$1;var NO_TYPED_ARRAY=IS_BUFFER_SHIM&&!Buffer$1.TYPED_ARRAY_SUPPORT;var Buffer_prototype=Bufferish$5.hasBuffer&&Buffer$1.prototype||{};writeToken.getWriteToken=getWriteToken;function getWriteToken(options){if(options&&options.uint8array){return init_uint8array()}else if(NO_TYPED_ARRAY||Bufferish$5.hasBuffer&&options&&options.safe){return init_safe()}else{return init_token$1()}}function init_uint8array(){var token=init_token$1();token[202]=writeN(202,4,writeFloatBE);token[203]=writeN(203,8,writeDoubleBE);return token}function init_token$1(){var token=uint8$2.slice();token[196]=write1(196);token[197]=write2(197);token[198]=write4(198);token[199]=write1(199);token[200]=write2(200);token[201]=write4(201);token[202]=writeN(202,4,Buffer_prototype.writeFloatBE||writeFloatBE,true);token[203]=writeN(203,8,Buffer_prototype.writeDoubleBE||writeDoubleBE,true);token[204]=write1(204);token[205]=write2(205);token[206]=write4(206);token[207]=writeN(207,8,writeUInt64BE);token[208]=write1(208);token[209]=write2(209);token[210]=write4(210);token[211]=writeN(211,8,writeInt64BE);token[217]=write1(217);token[218]=write2(218);token[219]=write4(219);token[220]=write2(220);token[221]=write4(221);token[222]=write2(222);token[223]=write4(223);return token}function init_safe(){var token=uint8$2.slice();token[196]=writeN(196,1,Buffer$1.prototype.writeUInt8);token[197]=writeN(197,2,Buffer$1.prototype.writeUInt16BE);token[198]=writeN(198,4,Buffer$1.prototype.writeUInt32BE);token[199]=writeN(199,1,Buffer$1.prototype.writeUInt8);token[200]=writeN(200,2,Buffer$1.prototype.writeUInt16BE);token[201]=writeN(201,4,Buffer$1.prototype.writeUInt32BE);token[202]=writeN(202,4,Buffer$1.prototype.writeFloatBE);token[203]=writeN(203,8,Buffer$1.prototype.writeDoubleBE);token[204]=writeN(204,1,Buffer$1.prototype.writeUInt8);token[205]=writeN(205,2,Buffer$1.prototype.writeUInt16BE);token[206]=writeN(206,4,Buffer$1.prototype.writeUInt32BE);token[207]=writeN(207,8,writeUInt64BE);token[208]=writeN(208,1,Buffer$1.prototype.writeInt8);token[209]=writeN(209,2,Buffer$1.prototype.writeInt16BE);token[210]=writeN(210,4,Buffer$1.prototype.writeInt32BE);token[211]=writeN(211,8,writeInt64BE);token[217]=writeN(217,1,Buffer$1.prototype.writeUInt8);token[218]=writeN(218,2,Buffer$1.prototype.writeUInt16BE);token[219]=writeN(219,4,Buffer$1.prototype.writeUInt32BE);token[220]=writeN(220,2,Buffer$1.prototype.writeUInt16BE);token[221]=writeN(221,4,Buffer$1.prototype.writeUInt32BE);token[222]=writeN(222,2,Buffer$1.prototype.writeUInt16BE);token[223]=writeN(223,4,Buffer$1.prototype.writeUInt32BE);return token}function write1(type){return function(encoder,value){var offset=encoder.reserve(2);var buffer=encoder.buffer;buffer[offset++]=type;buffer[offset]=value}}function write2(type){return function(encoder,value){var offset=encoder.reserve(3);var buffer=encoder.buffer;buffer[offset++]=type;buffer[offset++]=value>>>8;buffer[offset]=value}}function write4(type){return function(encoder,value){var offset=encoder.reserve(5);var buffer=encoder.buffer;buffer[offset++]=type;buffer[offset++]=value>>>24;buffer[offset++]=value>>>16;buffer[offset++]=value>>>8;buffer[offset]=value}}function writeN(type,len,method,noAssert){return function(encoder,value){var offset=encoder.reserve(len+1);encoder.buffer[offset++]=type;method.call(encoder.buffer,value,offset,noAssert)}}function writeUInt64BE(value,offset){new Uint64BE$2(this,offset,value)}function writeInt64BE(value,offset){new Int64BE$2(this,offset,value)}function writeFloatBE(value,offset){ieee754$1.write(this,value,offset,false,23,4)}function writeDoubleBE(value,offset){ieee754$1.write(this,value,offset,false,52,8)}var IS_ARRAY$1=isarray;var Int64Buffer$1=require$$1$2;var Uint64BE$1=Int64Buffer$1.Uint64BE;var Int64BE$1=Int64Buffer$1.Int64BE;var Bufferish$4=bufferish;var BufferProto$1=bufferishProto;var WriteToken=writeToken;var uint8$1=writeUint8.uint8;var ExtBuffer$2=extBuffer.ExtBuffer;var HAS_UINT8ARRAY="undefined"!==typeof Uint8Array;var HAS_MAP$1="undefined"!==typeof Map;var extmap=[];extmap[1]=212;extmap[2]=213;extmap[4]=214;extmap[8]=215;extmap[16]=216;writeType.getWriteType=getWriteType;function getWriteType(options){var token=WriteToken.getWriteToken(options);var useraw=options&&options.useraw;var binarraybuffer=HAS_UINT8ARRAY&&options&&options.binarraybuffer;var isBuffer=binarraybuffer?Bufferish$4.isArrayBuffer:Bufferish$4.isBuffer;var bin=binarraybuffer?bin_arraybuffer:bin_buffer;var usemap=HAS_MAP$1&&options&&options.usemap;var map=usemap?map_to_map:obj_to_map;var writeType={"boolean":bool,"function":nil,"number":number,"object":useraw?object_raw:object,"string":_string(useraw?raw_head_size:str_head_size),"symbol":nil,"undefined":nil};return writeType;function bool(encoder,value){var type=value?195:194;token[type](encoder,value)}function number(encoder,value){var ivalue=value|0;var type;if(value!==ivalue){type=203;token[type](encoder,value);return}else if(-32<=ivalue&&ivalue<=127){type=ivalue&255}else if(0<=ivalue){type=ivalue<=255?204:ivalue<=65535?205:206}else{type=-128<=ivalue?208:-32768<=ivalue?209:210}token[type](encoder,ivalue)}function uint64(encoder,value){var type=207;token[type](encoder,value.toArray())}function int64(encoder,value){var type=211;token[type](encoder,value.toArray())}function str_head_size(length){return length<32?1:length<=255?2:length<=65535?3:5}function raw_head_size(length){return length<32?1:length<=65535?3:5}function _string(head_size){return string;function string(encoder,value){var length=value.length;var maxsize=5+length*3;encoder.offset=encoder.reserve(maxsize);var buffer=encoder.buffer;var expected=head_size(length);var start=encoder.offset+expected;length=BufferProto$1.write.call(buffer,value,start);var actual=head_size(length);if(expected!==actual){var targetStart=start+actual-expected;var end=start+length;BufferProto$1.copy.call(buffer,buffer,targetStart,start,end)}var type=actual===1?160+length:actual<=3?215+actual:219;token[type](encoder,length);encoder.offset+=length}}function object(encoder,value){if(value===null)return nil(encoder,value);if(isBuffer(value))return bin(encoder,value);if(IS_ARRAY$1(value))return array(encoder,value);if(Uint64BE$1.isUint64BE(value))return uint64(encoder,value);if(Int64BE$1.isInt64BE(value))return int64(encoder,value);var packer=encoder.codec.getExtPacker(value);if(packer)value=packer(value);if(value instanceof ExtBuffer$2)return ext(encoder,value);map(encoder,value)}function object_raw(encoder,value){if(isBuffer(value))return raw(encoder,value);object(encoder,value)}function nil(encoder,value){var type=192;token[type](encoder,value)}function array(encoder,value){var length=value.length;var type=length<16?144+length:length<=65535?220:221;token[type](encoder,length);var encode=encoder.codec.encode;for(var i=0;i<length;i++){encode(encoder,value[i])}}function bin_buffer(encoder,value){var length=value.length;var type=length<255?196:length<=65535?197:198;token[type](encoder,length);encoder.send(value)}function bin_arraybuffer(encoder,value){bin_buffer(encoder,new Uint8Array(value))}function ext(encoder,value){var buffer=value.buffer;var length=buffer.length;var type=extmap[length]||(length<255?199:length<=65535?200:201);token[type](encoder,length);uint8$1[value.type](encoder);encoder.send(buffer)}function obj_to_map(encoder,value){var keys=Object.keys(value);var length=keys.length;var type=length<16?128+length:length<=65535?222:223;token[type](encoder,length);var encode=encoder.codec.encode;keys.forEach(function(key){encode(encoder,key);encode(encoder,value[key])})}function map_to_map(encoder,value){if(!(value instanceof Map))return obj_to_map(encoder,value);var length=value.size;var type=length<16?128+length:length<=65535?222:223;token[type](encoder,length);var encode=encoder.codec.encode;value.forEach(function(val,key,m){encode(encoder,key);encode(encoder,val)})}function raw(encoder,value){var length=value.length;var type=length<32?160+length:length<=65535?218:219;token[type](encoder,length);encoder.send(value)}}var codecBase={};var IS_ARRAY=isarray;codecBase.createCodec=createCodec;codecBase.install=install;codecBase.filter=filter;var Bufferish$3=bufferish;function Codec(options){if(!(this instanceof Codec))return new Codec(options);this.options=options;this.init()}Codec.prototype.init=function(){var options=this.options;if(options&&options.uint8array){this.bufferish=Bufferish$3.Uint8Array}return this};function install(props){for(var key in props){Codec.prototype[key]=add(Codec.prototype[key],props[key])}}function add(a,b){return a&&b?ab:a||b;function ab(){a.apply(this,arguments);return b.apply(this,arguments)}}function join(filters){filters=filters.slice();return function(value){return filters.reduce(iterator,value)};function iterator(value,filter){return filter(value)}}function filter(filter){return IS_ARRAY(filter)?join(filter):filter}function createCodec(options){return new Codec(options)}codecBase.preset=createCodec({preset:true});var ExtBuffer$1=extBuffer.ExtBuffer;var ExtPacker=extPacker;var WriteType=writeType;var CodecBase$1=codecBase;CodecBase$1.install({addExtPacker:addExtPacker,getExtPacker:getExtPacker,init:init$1});writeCore.preset=init$1.call(CodecBase$1.preset);function getEncoder(options){var writeType=WriteType.getWriteType(options);return encode;function encode(encoder,value){var func=writeType[typeof value];if(!func)throw new Error("Unsupported type \""+typeof value+"\": "+value);func(encoder,value)}}function init$1(){var options=this.options;this.encode=getEncoder(options);if(options&&options.preset){ExtPacker.setExtPackers(this)}return this}function addExtPacker(etype,Class,packer){packer=CodecBase$1.filter(packer);var name=Class.name;if(name&&name!=="Object"){var packers=this.extPackers||(this.extPackers={});packers[name]=extPacker}else{var list=this.extEncoderList||(this.extEncoderList=[]);list.unshift([Class,extPacker])}function extPacker(value){if(packer)value=packer(value);return new ExtBuffer$1(value,etype)}}function getExtPacker(value){var packers=this.extPackers||(this.extPackers={});var c=value.constructor;var e=c&&c.name&&packers[c.name];if(e)return e;var list=this.extEncoderList||(this.extEncoderList=[]);var len=list.length;for(var i=0;i<len;i++){var pair=list[i];if(c===pair[0])return pair[1]}}var flexBuffer={};flexBuffer.FlexDecoder=FlexDecoder$1;flexBuffer.FlexEncoder=FlexEncoder$1;var Bufferish$2=bufferish;var MIN_BUFFER_SIZE=2048;var MAX_BUFFER_SIZE=65536;var BUFFER_SHORTAGE="BUFFER_SHORTAGE";function FlexDecoder$1(){if(!(this instanceof FlexDecoder$1))return new FlexDecoder$1}function FlexEncoder$1(){if(!(this instanceof FlexEncoder$1))return new FlexEncoder$1}FlexDecoder$1.mixin=mixinFactory(getDecoderMethods());FlexDecoder$1.mixin(FlexDecoder$1.prototype);FlexEncoder$1.mixin=mixinFactory(getEncoderMethods());FlexEncoder$1.mixin(FlexEncoder$1.prototype);function getDecoderMethods(){return{bufferish:Bufferish$2,write:write,fetch:fetch,flush:flush,push:push,pull:pull,read:read$1,reserve:reserve,offset:0};function write(chunk){var prev=this.offset?Bufferish$2.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=prev?chunk?this.bufferish.concat([prev,chunk]):prev:chunk;this.offset=0}function flush(){while(this.offset<this.buffer.length){var start=this.offset;var value;try{value=this.fetch()}catch(e){if(e&&e.message!=BUFFER_SHORTAGE)throw e;this.offset=start;break}this.push(value)}}function reserve(length){var start=this.offset;var end=start+length;if(end>this.buffer.length)throw new Error(BUFFER_SHORTAGE);this.offset=end;return start}}function getEncoderMethods(){return{bufferish:Bufferish$2,write:write,fetch:fetch,flush:flush,push:push,pull:pull,read:read$1,reserve:reserve,send:send,maxBufferSize:MAX_BUFFER_SIZE,minBufferSize:MIN_BUFFER_SIZE,offset:0,start:0};function fetch(){var start=this.start;if(start<this.offset){var end=this.start=this.offset;return Bufferish$2.prototype.slice.call(this.buffer,start,end)}}function flush(){while(this.start<this.offset){var value=this.fetch();if(value)this.push(value)}}function pull(){var buffers=this.buffers||(this.buffers=[]);var chunk=buffers.length>1?this.bufferish.concat(buffers):buffers[0];buffers.length=0;return chunk}function reserve(length){var req=length|0;if(this.buffer){var size=this.buffer.length;var start=this.offset|0;var end=start+req;if(end<size){this.offset=end;return start}this.flush();length=Math.max(length,Math.min(size*2,this.maxBufferSize))}length=Math.max(length,this.minBufferSize);this.buffer=this.bufferish.alloc(length);this.start=0;this.offset=req;return 0}function send(buffer){var length=buffer.length;if(length>this.minBufferSize){this.flush();this.push(buffer)}else{var offset=this.reserve(length);Bufferish$2.prototype.copy.call(buffer,this.buffer,offset)}}}function write(){throw new Error("method not implemented: write()")}function fetch(){throw new Error("method not implemented: fetch()")}function read$1(){var length=this.buffers&&this.buffers.length;if(!length)return this.fetch();this.flush();return this.pull()}function push(chunk){var buffers=this.buffers||(this.buffers=[]);buffers.push(chunk)}function pull(){var buffers=this.buffers||(this.buffers=[]);return buffers.shift()}function mixinFactory(source){return mixin;function mixin(target){for(var key in source){target[key]=source[key]}return target}}encodeBuffer.EncodeBuffer=EncodeBuffer$3;var preset$1=writeCore.preset;var FlexEncoder=flexBuffer.FlexEncoder;FlexEncoder.mixin(EncodeBuffer$3.prototype);function EncodeBuffer$3(options){if(!(this instanceof EncodeBuffer$3))return new EncodeBuffer$3(options);if(options){this.options=options;if(options.codec){var codec=this.codec=options.codec;if(codec.bufferish)this.bufferish=codec.bufferish}}}EncodeBuffer$3.prototype.codec=preset$1;EncodeBuffer$3.prototype.write=function(input){this.codec.encode(this,input)};encode$3.encode=encode$1;var EncodeBuffer$2=encodeBuffer.EncodeBuffer;function encode$1(input,options){var encoder=new EncodeBuffer$2(options);encoder.write(input);return encoder.read()}var decode$3={};var decodeBuffer={};var readCore={};var extUnpacker={};extUnpacker.setExtUnpackers=setExtUnpackers;var Bufferish$1=bufferish;var Buffer=Bufferish$1.global;var _decode;var ERROR_COLUMNS={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function setExtUnpackers(codec){codec.addExtUnpacker(14,[decode$2,unpackError(Error)]);codec.addExtUnpacker(1,[decode$2,unpackError(EvalError)]);codec.addExtUnpacker(2,[decode$2,unpackError(RangeError)]);codec.addExtUnpacker(3,[decode$2,unpackError(ReferenceError)]);codec.addExtUnpacker(4,[decode$2,unpackError(SyntaxError)]);codec.addExtUnpacker(5,[decode$2,unpackError(TypeError)]);codec.addExtUnpacker(6,[decode$2,unpackError(URIError)]);codec.addExtUnpacker(10,[decode$2,unpackRegExp]);codec.addExtUnpacker(11,[decode$2,unpackClass(Boolean)]);codec.addExtUnpacker(12,[decode$2,unpackClass(String)]);codec.addExtUnpacker(13,[decode$2,unpackClass(Date)]);codec.addExtUnpacker(15,[decode$2,unpackClass(Number)]);if("undefined"!==typeof Uint8Array){codec.addExtUnpacker(17,unpackClass(Int8Array));codec.addExtUnpacker(18,unpackClass(Uint8Array));codec.addExtUnpacker(19,[unpackArrayBuffer,unpackClass(Int16Array)]);codec.addExtUnpacker(20,[unpackArrayBuffer,unpackClass(Uint16Array)]);codec.addExtUnpacker(21,[unpackArrayBuffer,unpackClass(Int32Array)]);codec.addExtUnpacker(22,[unpackArrayBuffer,unpackClass(Uint32Array)]);codec.addExtUnpacker(23,[unpackArrayBuffer,unpackClass(Float32Array)]);if("undefined"!==typeof Float64Array){codec.addExtUnpacker(24,[unpackArrayBuffer,unpackClass(Float64Array)])}if("undefined"!==typeof Uint8ClampedArray){codec.addExtUnpacker(25,unpackClass(Uint8ClampedArray))}codec.addExtUnpacker(26,unpackArrayBuffer);codec.addExtUnpacker(29,[unpackArrayBuffer,unpackClass(DataView)])}if(Bufferish$1.hasBuffer){codec.addExtUnpacker(27,unpackClass(Buffer))}}function decode$2(input){if(!_decode)_decode=decode$3.decode;return _decode(input)}function unpackRegExp(value){return RegExp.apply(null,value)}function unpackError(Class){return function(value){var out=new Class;for(var key in ERROR_COLUMNS){out[key]=value[key]}return out}}function unpackClass(Class){return function(value){return new Class(value)}}function unpackArrayBuffer(value){return new Uint8Array(value).buffer}var readFormat={};var ieee754=ieee754$2;var Int64Buffer=require$$1$2;var Uint64BE=Int64Buffer.Uint64BE;var Int64BE=Int64Buffer.Int64BE;readFormat.getReadFormat=getReadFormat;readFormat.readUint8=uint8;var Bufferish=bufferish;var BufferProto=bufferishProto;var HAS_MAP="undefined"!==typeof Map;var NO_ASSERT=true;function getReadFormat(options){var binarraybuffer=Bufferish.hasArrayBuffer&&options&&options.binarraybuffer;var int64=options&&options.int64;var usemap=HAS_MAP&&options&&options.usemap;var readFormat={map:usemap?map_to_map:map_to_obj,array:array,str:str,bin:binarraybuffer?bin_arraybuffer:bin_buffer,ext:ext$1,uint8:uint8,uint16:uint16,uint32:uint32,uint64:read(8,int64?readUInt64BE_int64:readUInt64BE),int8:int8,int16:int16,int32:int32,int64:read(8,int64?readInt64BE_int64:readInt64BE),float32:read(4,readFloatBE),float64:read(8,readDoubleBE)};return readFormat}function map_to_obj(decoder,len){var value={};var i;var k=new Array(len);var v=new Array(len);var decode=decoder.codec.decode;for(i=0;i<len;i++){k[i]=decode(decoder);v[i]=decode(decoder)}for(i=0;i<len;i++){value[k[i]]=v[i]}return value}function map_to_map(decoder,len){var value=new Map;var i;var k=new Array(len);var v=new Array(len);var decode=decoder.codec.decode;for(i=0;i<len;i++){k[i]=decode(decoder);v[i]=decode(decoder)}for(i=0;i<len;i++){value.set(k[i],v[i])}return value}function array(decoder,len){var value=new Array(len);var decode=decoder.codec.decode;for(var i=0;i<len;i++){value[i]=decode(decoder)}return value}function str(decoder,len){var start=decoder.reserve(len);var end=start+len;return BufferProto.toString.call(decoder.buffer,"utf-8",start,end)}function bin_buffer(decoder,len){var start=decoder.reserve(len);var end=start+len;var buf=BufferProto.slice.call(decoder.buffer,start,end);return Bufferish.from(buf)}function bin_arraybuffer(decoder,len){var start=decoder.reserve(len);var end=start+len;var buf=BufferProto.slice.call(decoder.buffer,start,end);return Bufferish.Uint8Array.from(buf).buffer}function ext$1(decoder,len){var start=decoder.reserve(len+1);var type=decoder.buffer[start++];var end=start+len;var unpack=decoder.codec.getExtUnpacker(type);if(!unpack)throw new Error("Invalid ext type: "+(type?"0x"+type.toString(16):type));var buf=BufferProto.slice.call(decoder.buffer,start,end);return unpack(buf)}function uint8(decoder){var start=decoder.reserve(1);return decoder.buffer[start]}function int8(decoder){var start=decoder.reserve(1);var value=decoder.buffer[start];return value&128?value-256:value}function uint16(decoder){var start=decoder.reserve(2);var buffer=decoder.buffer;return buffer[start++]<<8|buffer[start]}function int16(decoder){var start=decoder.reserve(2);var buffer=decoder.buffer;var value=buffer[start++]<<8|buffer[start];return value&32768?value-65536:value}function uint32(decoder){var start=decoder.reserve(4);var buffer=decoder.buffer;return buffer[start++]*16777216+(buffer[start++]<<16)+(buffer[start++]<<8)+buffer[start]}function int32(decoder){var start=decoder.reserve(4);var buffer=decoder.buffer;return buffer[start++]<<24|buffer[start++]<<16|buffer[start++]<<8|buffer[start]}function read(len,method){return function(decoder){var start=decoder.reserve(len);return method.call(decoder.buffer,start,NO_ASSERT)}}function readUInt64BE(start){return new Uint64BE(this,start).toNumber()}function readInt64BE(start){return new Int64BE(this,start).toNumber()}function readUInt64BE_int64(start){return new Uint64BE(this,start)}function readInt64BE_int64(start){return new Int64BE(this,start)}function readFloatBE(start){return ieee754.read(this,start,false,23,4)}function readDoubleBE(start){return ieee754.read(this,start,false,52,8)}var readToken={};var ReadFormat=readFormat;readToken.getReadToken=getReadToken;function getReadToken(options){var format=ReadFormat.getReadFormat(options);if(options&&options.useraw){return init_useraw(format)}else{return init_token(format)}}function init_token(format){var i;var token=new Array(256);for(i=0;i<=127;i++){token[i]=constant(i)}for(i=128;i<=143;i++){token[i]=fix(i-128,format.map)}for(i=144;i<=159;i++){token[i]=fix(i-144,format.array)}for(i=160;i<=191;i++){token[i]=fix(i-160,format.str)}token[192]=constant(null);token[193]=null;token[194]=constant(false);token[195]=constant(true);token[196]=flex(format.uint8,format.bin);token[197]=flex(format.uint16,format.bin);token[198]=flex(format.uint32,format.bin);token[199]=flex(format.uint8,format.ext);token[200]=flex(format.uint16,format.ext);token[201]=flex(format.uint32,format.ext);token[202]=format.float32;token[203]=format.float64;token[204]=format.uint8;token[205]=format.uint16;token[206]=format.uint32;token[207]=format.uint64;token[208]=format.int8;token[209]=format.int16;token[210]=format.int32;token[211]=format.int64;token[212]=fix(1,format.ext);token[213]=fix(2,format.ext);token[214]=fix(4,format.ext);token[215]=fix(8,format.ext);token[216]=fix(16,format.ext);token[217]=flex(format.uint8,format.str);token[218]=flex(format.uint16,format.str);token[219]=flex(format.uint32,format.str);token[220]=flex(format.uint16,format.array);token[221]=flex(format.uint32,format.array);token[222]=flex(format.uint16,format.map);token[223]=flex(format.uint32,format.map);for(i=224;i<=255;i++){token[i]=constant(i-256)}return token}function init_useraw(format){var i;var token=init_token(format).slice();token[217]=token[196];token[218]=token[197];token[219]=token[198];for(i=160;i<=191;i++){token[i]=fix(i-160,format.bin)}return token}function constant(value){return function(){return value}}function flex(lenFunc,decodeFunc){return function(decoder){var len=lenFunc(decoder);return decodeFunc(decoder,len)}}function fix(len,method){return function(decoder){return method(decoder,len)}}var ExtBuffer=extBuffer.ExtBuffer;var ExtUnpacker=extUnpacker;var readUint8=readFormat.readUint8;var ReadToken=readToken;var CodecBase=codecBase;CodecBase.install({addExtUnpacker:addExtUnpacker,getExtUnpacker:getExtUnpacker,init:init});readCore.preset=init.call(CodecBase.preset);function getDecoder(options){var readToken=ReadToken.getReadToken(options);return decode;function decode(decoder){var type=readUint8(decoder);var func=readToken[type];if(!func)throw new Error("Invalid type: "+(type?"0x"+type.toString(16):type));return func(decoder)}}function init(){var options=this.options;this.decode=getDecoder(options);if(options&&options.preset){ExtUnpacker.setExtUnpackers(this)}return this}function addExtUnpacker(etype,unpacker){var unpackers=this.extUnpackers||(this.extUnpackers=[]);unpackers[etype]=CodecBase.filter(unpacker)}function getExtUnpacker(type){var unpackers=this.extUnpackers||(this.extUnpackers=[]);return unpackers[type]||extUnpacker;function extUnpacker(buffer){return new ExtBuffer(buffer,type)}}decodeBuffer.DecodeBuffer=DecodeBuffer$3;var preset=readCore.preset;var FlexDecoder=flexBuffer.FlexDecoder;FlexDecoder.mixin(DecodeBuffer$3.prototype);function DecodeBuffer$3(options){if(!(this instanceof DecodeBuffer$3))return new DecodeBuffer$3(options);if(options){this.options=options;if(options.codec){var codec=this.codec=options.codec;if(codec.bufferish)this.bufferish=codec.bufferish}}}DecodeBuffer$3.prototype.codec=preset;DecodeBuffer$3.prototype.fetch=function(){return this.codec.decode(this)};decode$3.decode=decode$1;var DecodeBuffer$2=decodeBuffer.DecodeBuffer;function decode$1(input,options){var decoder=new DecodeBuffer$2(options);decoder.write(input);return decoder.read()}var encoder={};var eventLite={exports:{}};(function(module){function EventLite(){if(!(this instanceof EventLite))return new EventLite}(function(EventLite){module.exports=EventLite;var LISTENERS="listeners";var methods={on:on,once:once,off:off,emit:emit};mixin(EventLite.prototype);EventLite.mixin=mixin;function mixin(target){for(var key in methods){target[key]=methods[key]}return target}function on(type,func){getListeners(this,type).push(func);return this}function once(type,func){var that=this;wrap.originalListener=func;getListeners(that,type).push(wrap);return that;function wrap(){off.call(that,type,wrap);func.apply(this,arguments)}}function off(type,func){var that=this;var listners;if(!arguments.length){delete that[LISTENERS]}else if(!func){listners=that[LISTENERS];if(listners){delete listners[type];if(!Object.keys(listners).length)return off.call(that)}}else{listners=getListeners(that,type,true);if(listners){listners=listners.filter(ne);if(!listners.length)return off.call(that,type);that[LISTENERS][type]=listners}}return that;function ne(test){return test!==func&&test.originalListener!==func}}function emit(type,value){var that=this;var listeners=getListeners(that,type,true);if(!listeners)return false;var arglen=arguments.length;if(arglen===1){listeners.forEach(zeroarg)}else if(arglen===2){listeners.forEach(onearg)}else{var args=Array.prototype.slice.call(arguments,1);listeners.forEach(moreargs)}return!!listeners.length;function zeroarg(func){func.call(that)}function onearg(func){func.call(that,value)}function moreargs(func){func.apply(that,args)}}function getListeners(that,type,readonly){if(readonly&&!that[LISTENERS])return;var listeners=that[LISTENERS]||(that[LISTENERS]={});return listeners[type]||(listeners[type]=[])}})(EventLite)})(eventLite);encoder.Encoder=Encoder;var EventLite$1=eventLite.exports;var EncodeBuffer$1=encodeBuffer.EncodeBuffer;function Encoder(options){if(!(this instanceof Encoder))return new Encoder(options);EncodeBuffer$1.call(this,options)}Encoder.prototype=new EncodeBuffer$1;EventLite$1.mixin(Encoder.prototype);Encoder.prototype.encode=function(chunk){this.write(chunk);this.emit("data",this.read())};Encoder.prototype.end=function(chunk){if(arguments.length)this.encode(chunk);this.flush();this.emit("end")};var decoder={};decoder.Decoder=Decoder;var EventLite=eventLite.exports;var DecodeBuffer$1=decodeBuffer.DecodeBuffer;function Decoder(options){if(!(this instanceof Decoder))return new Decoder(options);DecodeBuffer$1.call(this,options)}Decoder.prototype=new DecodeBuffer$1;EventLite.mixin(Decoder.prototype);Decoder.prototype.decode=function(chunk){if(arguments.length)this.write(chunk);this.flush()};Decoder.prototype.push=function(chunk){this.emit("data",chunk)};Decoder.prototype.end=function(chunk){this.decode(chunk);this.emit("end")};var encodeStream={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout;var cachedClearTimeout=defaultClearTimeout;if(typeof global$1.setTimeout==="function"){cachedSetTimeout=setTimeout}if(typeof global$1.clearTimeout==="function"){cachedClearTimeout=clearTimeout}function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}function nextTick(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}}function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};var performance=global$1.performance||{};performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return new Date().getTime()};var inherits;if(typeof Object.create==="function"){inherits=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{inherits=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}var inherits$1=inherits;var formatRegExp=/%[sdj%]/g;function format(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x;}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str}function deprecate(fn,msg){if(isUndefined(global$1.process)){return function(){return deprecate(fn,msg).apply(this,arguments)}}var warned=false;function deprecated(){if(!warned){{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated}var debugs={};var debugEnviron;function debuglog(set){if(isUndefined(debugEnviron))debugEnviron="";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=0;debugs[set]=function(){var msg=format.apply(null,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]}function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){_extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}inspect.colors={"bold":[1,22],"italic":[3,23],"underline":[4,24],"inverse":[7,27],"white":[37,39],"grey":[90,39],"black":[30,39],"blue":[34,39],"cyan":[36,39],"green":[32,39],"magenta":[35,39],"red":[31,39],"yellow":[33,39]};inspect.styles={"special":"cyan","number":"yellow","boolean":"yellow","undefined":"grey","null":"bold","string":"green","date":"magenta","regexp":"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"\x1B["+inspect.colors[style][0]+"m"+str+"\x1B["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction$1(value.inspect)&&value.inspect!==inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction$1(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction$1(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\"")+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,"\"").replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var length=output.reduce(function(prev,cur){if(cur.indexOf("\n")>=0);return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return typeof arg==="boolean"}function isNull(arg){return arg===null}function isNullOrUndefined(arg){return arg==null}function isNumber(arg){return typeof arg==="number"}function isString(arg){return typeof arg==="string"}function isSymbol(arg){return typeof arg==="symbol"}function isUndefined(arg){return arg===void 0}function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}function isFunction$1(arg){return typeof arg==="function"}function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}function isBuffer(maybeBuf){return Buffer$5.isBuffer(maybeBuf)}function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}function log(){console.log("%s - %s",timestamp(),format.apply(null,arguments))}function _extend(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var util$2={inherits:inherits$1,_extend:_extend,log:log,isBuffer:isBuffer,isPrimitive:isPrimitive,isFunction:isFunction$1,isError:isError,isDate:isDate,isObject:isObject,isRegExp:isRegExp,isUndefined:isUndefined,isSymbol:isSymbol,isString:isString,isNumber:isNumber,isNullOrUndefined:isNullOrUndefined,isNull:isNull,isBoolean:isBoolean,isArray:isArray,inspect:inspect,deprecate:deprecate,format:format,debuglog:debuglog};var util$3=Object.freeze({__proto__:null,format:format,deprecate:deprecate,debuglog:debuglog,inspect:inspect,isArray:isArray,isBoolean:isBoolean,isNull:isNull,isNullOrUndefined:isNullOrUndefined,isNumber:isNumber,isString:isString,isSymbol:isSymbol,isUndefined:isUndefined,isRegExp:isRegExp,isObject:isObject,isDate:isDate,isError:isError,isFunction:isFunction$1,isPrimitive:isPrimitive,isBuffer:isBuffer,log:log,inherits:inherits$1,_extend:_extend,"default":util$2});var require$$0$1=getAugmentedNamespace(util$3);var domain;function EventHandlers(){}EventHandlers.prototype=Object.create(null);function EventEmitter$4(){EventEmitter$4.init.call(this)}EventEmitter$4.EventEmitter=EventEmitter$4;EventEmitter$4.usingDomains=false;EventEmitter$4.prototype.domain=undefined;EventEmitter$4.prototype._events=undefined;EventEmitter$4.prototype._maxListeners=undefined;EventEmitter$4.defaultMaxListeners=10;EventEmitter$4.init=function(){this.domain=null;if(EventEmitter$4.usingDomains){if(domain.active);}if(!this._events||this._events===Object.getPrototypeOf(this)._events){this._events=new EventHandlers;this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};EventEmitter$4.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=="number"||n<0||isNaN(n))throw new TypeError("\"n\" argument must be a positive number");this._maxListeners=n;return this};function $getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter$4.defaultMaxListeners;return that._maxListeners}EventEmitter$4.prototype.getMaxListeners=function getMaxListeners(){return $getMaxListeners(this)};function emitNone(handler,isFn,self){if(isFn)handler.call(self);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self)}}function emitOne(handler,isFn,self,arg1){if(isFn)handler.call(self,arg1);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self,arg1)}}function emitTwo(handler,isFn,self,arg1,arg2){if(isFn)handler.call(self,arg1,arg2);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self,arg1,arg2)}}function emitThree(handler,isFn,self,arg1,arg2,arg3){if(isFn)handler.call(self,arg1,arg2,arg3);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self,arg1,arg2,arg3)}}function emitMany(handler,isFn,self,args){if(isFn)handler.apply(self,args);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].apply(self,args)}}EventEmitter$4.prototype.emit=function emit(type){var er,handler,len,args,i,events,domain;var doError=type==="error";events=this._events;if(events)doError=doError&&events.error==null;else if(!doError)return false;domain=this.domain;if(doError){er=arguments[1];if(domain){if(!er)er=new Error("Uncaught, unspecified \"error\" event");er.domainEmitter=this;er.domain=domain;er.domainThrown=false;domain.emit("error",er)}else if(er instanceof Error){throw er}else{var err=new Error("Uncaught, unspecified \"error\" event. ("+er+")");err.context=er;throw err}return false}handler=events[type];if(!handler)return false;var isFn=typeof handler==="function";len=arguments.length;switch(len){case 1:emitNone(handler,isFn,this);break;case 2:emitOne(handler,isFn,this,arguments[1]);break;case 3:emitTwo(handler,isFn,this,arguments[1],arguments[2]);break;case 4:emitThree(handler,isFn,this,arguments[1],arguments[2],arguments[3]);break;default:args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];emitMany(handler,isFn,this,args);}return true};function _addListener(target,type,listener,prepend){var m;var events;var existing;if(typeof listener!=="function")throw new TypeError("\"listener\" argument must be a function");events=target._events;if(!events){events=target._events=new EventHandlers;target._eventsCount=0}else{if(events.newListener){target.emit("newListener",type,listener.listener?listener.listener:listener);events=target._events}existing=events[type]}if(!existing){existing=events[type]=listener;++target._eventsCount}else{if(typeof existing==="function"){existing=events[type]=prepend?[listener,existing]:[existing,listener]}else{if(prepend){existing.unshift(listener)}else{existing.push(listener)}}if(!existing.warned){m=$getMaxListeners(target);if(m&&m>0&&existing.length>m){existing.warned=true;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+type+" listeners added. "+"Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning";w.emitter=target;w.type=type;w.count=existing.length;emitWarning(w)}}}return target}function emitWarning(e){typeof console.warn==="function"?console.warn(e):console.log(e)}EventEmitter$4.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false)};EventEmitter$4.prototype.on=EventEmitter$4.prototype.addListener;EventEmitter$4.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true)};function _onceWrap(target,type,listener){var fired=false;function g(){target.removeListener(type,g);if(!fired){fired=true;listener.apply(target,arguments)}}g.listener=listener;return g}EventEmitter$4.prototype.once=function once(type,listener){if(typeof listener!=="function")throw new TypeError("\"listener\" argument must be a function");this.on(type,_onceWrap(this,type,listener));return this};EventEmitter$4.prototype.prependOnceListener=function prependOnceListener(type,listener){if(typeof listener!=="function")throw new TypeError("\"listener\" argument must be a function");this.prependListener(type,_onceWrap(this,type,listener));return this};EventEmitter$4.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if(typeof listener!=="function")throw new TypeError("\"listener\" argument must be a function");events=this._events;if(!events)return this;list=events[type];if(!list)return this;if(list===listener||list.listener&&list.listener===listener){if(--this._eventsCount===0)this._events=new EventHandlers;else{delete events[type];if(events.removeListener)this.emit("removeListener",type,list.listener||listener)}}else if(typeof list!=="function"){position=-1;for(i=list.length;i-->0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){originalListener=list[i].listener;position=i;break}}if(position<0)return this;if(list.length===1){list[0]=undefined;if(--this._eventsCount===0){this._events=new EventHandlers;return this}else{delete events[type]}}else{spliceOne(list,position)}if(events.removeListener)this.emit("removeListener",type,originalListener||listener)}return this};EventEmitter$4.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events;events=this._events;if(!events)return this;if(!events.removeListener){if(arguments.length===0){this._events=new EventHandlers;this._eventsCount=0}else if(events[type]){if(--this._eventsCount===0)this._events=new EventHandlers;else delete events[type]}return this}if(arguments.length===0){var keys=Object.keys(events);for(var i=0,key;i<keys.length;++i){key=keys[i];if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events=new EventHandlers;this._eventsCount=0;return this}listeners=events[type];if(typeof listeners==="function"){this.removeListener(type,listeners)}else if(listeners){do{this.removeListener(type,listeners[listeners.length-1])}while(listeners[0])}return this};EventEmitter$4.prototype.listeners=function listeners(type){var evlistener;var ret;var events=this._events;if(!events)ret=[];else{evlistener=events[type];if(!evlistener)ret=[];else if(typeof evlistener==="function")ret=[evlistener.listener||evlistener];else ret=unwrapListeners(evlistener)}return ret};EventEmitter$4.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==="function"){return emitter.listenerCount(type)}else{return listenerCount$1.call(emitter,type)}};EventEmitter$4.prototype.listenerCount=listenerCount$1;function listenerCount$1(type){var events=this._events;if(events){var evlistener=events[type];if(typeof evlistener==="function"){return 1}else if(evlistener){return evlistener.length}}return 0}EventEmitter$4.prototype.eventNames=function eventNames(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function spliceOne(list,index){for(var i=index,k=i+1,n=list.length;k<n;i+=1,k+=1)list[i]=list[k];list.pop()}function arrayClone(arr,i){var copy=new Array(i);while(i--)copy[i]=arr[i];return copy}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i]}return ret}function BufferList(){this.head=null;this.tail=null;this.length=0}BufferList.prototype.push=function(v){var entry={data:v,next:null};if(this.length>0)this.tail.next=entry;else this.head=entry;this.tail=entry;++this.length};BufferList.prototype.unshift=function(v){var entry={data:v,next:this.head};if(this.length===0)this.tail=entry;this.head=entry;++this.length};BufferList.prototype.shift=function(){if(this.length===0)return;var ret=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return ret};BufferList.prototype.clear=function(){this.head=this.tail=null;this.length=0};BufferList.prototype.join=function(s){if(this.length===0)return"";var p=this.head;var ret=""+p.data;while(p=p.next){ret+=s+p.data}return ret};BufferList.prototype.concat=function(n){if(this.length===0)return Buffer$5.alloc(0);if(this.length===1)return this.head.data;var ret=Buffer$5.allocUnsafe(n>>>0);var p=this.head;var i=0;while(p){p.data.copy(ret,i);i+=p.data.length;p=p.next}return ret};var isBufferEncoding=Buffer$5.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false;}};function assertEncoding(encoding){if(encoding&&!isBufferEncoding(encoding)){throw new Error("Unknown encoding: "+encoding)}}function StringDecoder(encoding){this.encoding=(encoding||"utf8").toLowerCase().replace(/[-_]/,"");assertEncoding(encoding);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return;}this.charBuffer=new Buffer$5(6);this.charReceived=0;this.charLength=0}StringDecoder.prototype.write=function(buffer){var charStr="";while(this.charLength){var available=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;buffer.copy(this.charBuffer,this.charReceived,0,available);this.charReceived+=available;if(this.charReceived<this.charLength){return""}buffer=buffer.slice(available,buffer.length);charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var charCode=charStr.charCodeAt(charStr.length-1);if(charCode>=55296&&charCode<=56319){this.charLength+=this.surrogateSize;charStr="";continue}this.charReceived=this.charLength=0;if(buffer.length===0){return charStr}break}this.detectIncompleteChar(buffer);var end=buffer.length;if(this.charLength){buffer.copy(this.charBuffer,0,buffer.length-this.charReceived,end);end-=this.charReceived}charStr+=buffer.toString(this.encoding,0,end);var end=charStr.length-1;var charCode=charStr.charCodeAt(end);if(charCode>=55296&&charCode<=56319){var size=this.surrogateSize;this.charLength+=size;this.charReceived+=size;this.charBuffer.copy(this.charBuffer,size,0,size);buffer.copy(this.charBuffer,0,0,size);return charStr.substring(0,end)}return charStr};StringDecoder.prototype.detectIncompleteChar=function(buffer){var i=buffer.length>=3?3:buffer.length;for(;i>0;i--){var c=buffer[buffer.length-i];if(i==1&&c>>5==6){this.charLength=2;break}if(i<=2&&c>>4==14){this.charLength=3;break}if(i<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=i};StringDecoder.prototype.end=function(buffer){var res="";if(buffer&&buffer.length)res=this.write(buffer);if(this.charReceived){var cr=this.charReceived;var buf=this.charBuffer;var enc=this.encoding;res+=buf.slice(0,cr).toString(enc)}return res};function passThroughWrite(buffer){return buffer.toString(this.encoding)}function utf16DetectIncompleteChar(buffer){this.charReceived=buffer.length%2;this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(buffer){this.charReceived=buffer.length%3;this.charLength=this.charReceived?3:0}Readable.ReadableState=ReadableState;var debug=debuglog("stream");inherits$1(Readable,EventEmitter$4);function prependListener(emitter,event,fn){if(typeof emitter.prependListener==="function"){return emitter.prependListener(event,fn)}else{if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(Array.isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]]}}function listenerCount(emitter,type){return emitter.listeners(type).length}function ReadableState(options,stream){options=options||{};this.objectMode=!!options.objectMode;if(stream instanceof Duplex)this.objectMode=this.objectMode||!!options.readableObjectMode;var hwm=options.highWaterMark;var defaultHwm=this.objectMode?16:16*1024;this.highWaterMark=hwm||hwm===0?hwm:defaultHwm;this.highWaterMark=~~this.highWaterMark;this.buffer=new BufferList;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.defaultEncoding=options.defaultEncoding||"utf8";this.ranOut=false;this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding}}function Readable(options){if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;if(options&&typeof options.read==="function")this._read=options.read;EventEmitter$4.call(this)}Readable.prototype.push=function(chunk,encoding){var state=this._readableState;if(!state.objectMode&&typeof chunk==="string"){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=Buffer$5.from(chunk,encoding);encoding=""}}return readableAddChunk(this,state,chunk,encoding,false)};Readable.prototype.unshift=function(chunk){var state=this._readableState;return readableAddChunk(this,state,chunk,"",true)};Readable.prototype.isPaused=function(){return this._readableState.flowing===false};function readableAddChunk(stream,state,chunk,encoding,addToFront){var er=chunkInvalid(state,chunk);if(er){stream.emit("error",er)}else if(chunk===null){state.reading=false;onEofChunk(stream,state)}else if(state.objectMode||chunk&&chunk.length>0){if(state.ended&&!addToFront){var e=new Error("stream.push() after EOF");stream.emit("error",e)}else if(state.endEmitted&&addToFront){var _e=new Error("stream.unshift() after end event");stream.emit("error",_e)}else{var skipAdd;if(state.decoder&&!addToFront&&!encoding){chunk=state.decoder.write(chunk);skipAdd=!state.objectMode&&chunk.length===0}if(!addToFront)state.reading=false;if(!skipAdd){if(state.flowing&&state.length===0&&!state.sync){stream.emit("data",chunk);stream.read(0)}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream)}}maybeReadMore(stream,state)}}else if(!addToFront){state.reading=false}return needMoreData(state)}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0)}Readable.prototype.setEncoding=function(enc){this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc;return this};var MAX_HWM=8388608;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++}return n}function howMuchToRead(n,state){if(n<=0||state.length===0&&state.ended)return 0;if(state.objectMode)return 1;if(n!==n){if(state.flowing&&state.length)return state.buffer.head.data.length;else return state.length}if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n<=state.length)return n;if(!state.ended){state.needReadable=true;return 0}return state.length}Readable.prototype.read=function(n){debug("read",n);n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){debug("read: emitReadable",state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null}var doRead=state.needReadable;debug("need readable",doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug("length less than watermark",doRead)}if(state.ended||state.reading){doRead=false;debug("reading or ended",doRead)}else if(doRead){debug("do read");state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false;if(!state.reading)n=howMuchToRead(nOrig,state)}var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0}else{state.length-=n}if(state.length===0){if(!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended)endReadable(this)}if(ret!==null)this.emit("data",ret);return ret};function chunkInvalid(state,chunk){var er=null;if(!Buffer$5.isBuffer(chunk)&&typeof chunk!=="string"&&chunk!==null&&chunk!==undefined&&!state.objectMode){er=new TypeError("Invalid non-string/buffer chunk")}return er}function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length}}state.ended=true;emitReadable(stream)}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug("emitReadable",state.flowing);state.emittedReadable=true;if(state.sync)nextTick(emitReadable_,stream);else emitReadable_(stream)}}function emitReadable_(stream){debug("emit readable");stream.emit("readable");flow(stream)}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;nextTick(maybeReadMore_,stream,state)}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){debug("maybeReadMore read 0");stream.read(0);if(len===state.length)break;else len=state.length}state.readingMore=false}Readable.prototype._read=function(n){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break;}state.pipesCount+=1;debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var doEnd=!pipeOpts||pipeOpts.end!==false;var endFn=doEnd?onend:cleanup;if(state.endEmitted)nextTick(endFn);else src.once("end",endFn);dest.on("unpipe",onunpipe);function onunpipe(readable){debug("onunpipe");if(readable===src){cleanup()}}function onend(){debug("onend");dest.end()}var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);var cleanedUp=false;function cleanup(){debug("cleanup");dest.removeListener("close",onclose);dest.removeListener("finish",onfinish);dest.removeListener("drain",ondrain);dest.removeListener("error",onerror);dest.removeListener("unpipe",onunpipe);src.removeListener("end",onend);src.removeListener("end",cleanup);src.removeListener("data",ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain()}var increasedAwaitDrain=false;src.on("data",ondata);function ondata(chunk){debug("ondata");increasedAwaitDrain=false;var ret=dest.write(chunk);if(false===ret&&!increasedAwaitDrain){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug("false write response, pause",src._readableState.awaitDrain);src._readableState.awaitDrain++;increasedAwaitDrain=true}src.pause()}}function onerror(er){debug("onerror",er);unpipe();dest.removeListener("error",onerror);if(listenerCount(dest,"error")===0)dest.emit("error",er)}prependListener(dest,"error",onerror);function onclose(){dest.removeListener("finish",onfinish);unpipe()}dest.once("close",onclose);function onfinish(){debug("onfinish");dest.removeListener("close",onclose);unpipe()}dest.once("finish",onfinish);function unpipe(){debug("unpipe");src.unpipe(dest)}dest.emit("pipe",src);if(!state.flowing){debug("pipe resume");src.resume()}return dest};function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&src.listeners("data").length){state.flowing=true;flow(src)}}}Readable.prototype.unpipe=function(dest){var state=this._readableState;if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit("unpipe",this);return this}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var _i=0;_i<len;_i++){dests[_i].emit("unpipe",this)}return this}var i=indexOf(state.pipes,dest);if(i===-1)return this;state.pipes.splice(i,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit("unpipe",this);return this};Readable.prototype.on=function(ev,fn){var res=EventEmitter$4.prototype.on.call(this,ev,fn);if(ev==="data"){if(this._readableState.flowing!==false)this.resume()}else if(ev==="readable"){var state=this._readableState;if(!state.endEmitted&&!state.readableListening){state.readableListening=state.needReadable=true;state.emittedReadable=false;if(!state.reading){nextTick(nReadingNextTick,this)}else if(state.length){emitReadable(this)}}}return res};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(self){debug("readable nexttick read 0");self.read(0)}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug("resume");state.flowing=true;resume(this,state)}return this};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;nextTick(resume_,stream,state)}}function resume_(stream,state){if(!state.reading){debug("resume read 0");stream.read(0)}state.resumeScheduled=false;state.awaitDrain=0;stream.emit("resume");flow(stream);if(state.flowing&&!state.reading)stream.read(0)}Readable.prototype.pause=function(){debug("call pause flowing=%j",this._readableState.flowing);if(false!==this._readableState.flowing){debug("pause");this._readableState.flowing=false;this.emit("pause")}return this};function flow(stream){var state=stream._readableState;debug("flow",state.flowing);while(state.flowing&&stream.read()!==null){}}Readable.prototype.wrap=function(stream){var state=this._readableState;var paused=false;var self=this;stream.on("end",function(){debug("wrapped end");if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)self.push(chunk)}self.push(null)});stream.on("data",function(chunk){debug("wrapped data");if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=self.push(chunk);if(!ret){paused=true;stream.pause()}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==="function"){this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i)}}var events=["error","close","destroy","pause","resume"];forEach(events,function(ev){stream.on(ev,self.emit.bind(self,ev))});self._read=function(n){debug("wrapped _read",n);if(paused){paused=false;stream.resume()}};return self};Readable._fromList=fromList;function fromList(n,state){if(state.length===0)return null;var ret;if(state.objectMode)ret=state.buffer.shift();else if(!n||n>=state.length){if(state.decoder)ret=state.buffer.join("");else if(state.buffer.length===1)ret=state.buffer.head.data;else ret=state.buffer.concat(state.length);state.buffer.clear()}else{ret=fromListPartial(n,state.buffer,state.decoder)}return ret}function fromListPartial(n,list,hasStrings){var ret;if(n<list.head.data.length){ret=list.head.data.slice(0,n);list.head.data=list.head.data.slice(n)}else if(n===list.head.data.length){ret=list.shift()}else{ret=hasStrings?copyFromBufferString(n,list):copyFromBuffer(n,list)}return ret}function copyFromBufferString(n,list){var p=list.head;var c=1;var ret=p.data;n-=ret.length;while(p=p.next){var str=p.data;var nb=n>str.length?str.length:n;if(nb===str.length)ret+=str;else ret+=str.slice(0,n);n-=nb;if(n===0){if(nb===str.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null}else{list.head=p;p.data=str.slice(nb)}break}++c}list.length-=c;return ret}function copyFromBuffer(n,list){var ret=Buffer$5.allocUnsafe(n);var p=list.head;var c=1;p.data.copy(ret);n-=p.data.length;while(p=p.next){var buf=p.data;var nb=n>buf.length?buf.length:n;buf.copy(ret,ret.length-n,0,nb);n-=nb;if(n===0){if(nb===buf.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null}else{list.head=p;p.data=buf.slice(nb)}break}++c}list.length-=c;return ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error("\"endReadable()\" called on non-empty stream");if(!state.endEmitted){state.ended=true;nextTick(endReadableNT,state,stream)}}function endReadableNT(state,stream){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit("end")}}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++){f(xs[i],i)}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i}return-1}Writable.WritableState=WritableState;inherits$1(Writable,EventEmitter$4);function nop(){}function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null}function WritableState(options,stream){Object.defineProperty(this,"buffer",{get:deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.")});options=options||{};this.objectMode=!!options.objectMode;if(stream instanceof Duplex)this.objectMode=this.objectMode||!!options.writableObjectMode;var hwm=options.highWaterMark;var defaultHwm=this.objectMode?16:16*1024;this.highWaterMark=hwm||hwm===0?hwm:defaultHwm;this.highWaterMark=~~this.highWaterMark;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function writableStateGetBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next}return out};function Writable(options){if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this);this.writable=true;if(options){if(typeof options.write==="function")this._write=options.write;if(typeof options.writev==="function")this._writev=options.writev}EventEmitter$4.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(stream,cb){var er=new Error("write after end");stream.emit("error",er);nextTick(cb,er)}function validChunk(stream,state,chunk,cb){var valid=true;var er=false;if(chunk===null){er=new TypeError("May not write null values to stream")}else if(!Buffer$5.isBuffer(chunk)&&typeof chunk!=="string"&&chunk!==undefined&&!state.objectMode){er=new TypeError("Invalid non-string/buffer chunk")}if(er){stream.emit("error",er);nextTick(cb,er);valid=false}return valid}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;if(typeof encoding==="function"){cb=encoding;encoding=null}if(Buffer$5.isBuffer(chunk))encoding="buffer";else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=="function")cb=nop;if(state.ended)writeAfterEnd(this,cb);else if(validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,chunk,encoding,cb)}return ret};Writable.prototype.cork=function(){var state=this._writableState;state.corked++};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state)}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==="string")encoding=encoding.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+encoding);this._writableState.defaultEncoding=encoding;return this};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==="string"){chunk=Buffer$5.from(chunk,encoding)}return chunk}function writeOrBuffer(stream,state,chunk,encoding,cb){chunk=decodeChunk(state,chunk,encoding);if(Buffer$5.isBuffer(chunk))encoding="buffer";var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest=new WriteReq(chunk,encoding,cb);if(last){last.next=state.lastBufferedRequest}else{state.bufferedRequest=state.lastBufferedRequest}state.bufferedRequestCount+=1}else{doWrite(stream,state,false,len,chunk,encoding,cb)}return ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync)nextTick(cb,er);else cb(er);stream._writableState.errorEmitted=true;stream.emit("error",er)}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state)}if(sync){nextTick(afterWrite,stream,state,finished,cb)}else{afterWrite(stream,state,finished,cb)}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state)}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit("drain")}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;while(entry){buffer[count]=entry;entry=entry.next;count+=1}doWrite(stream,state,true,state.length,buffer,"",holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null}else{state.corkedRequestsFree=new CorkedRequest(state)}}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;if(state.writing){break}}if(entry===null)state.lastBufferedRequest=null}state.bufferedRequestCount=0;state.bufferedRequest=entry;state.bufferProcessing=false}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==="function"){cb=chunk;chunk=null;encoding=null}else if(typeof encoding==="function"){cb=encoding;encoding=null}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork()}if(!state.ending&&!state.finished)endWritable(this,state,cb)};function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing}function prefinish(stream,state){if(!state.prefinished){state.prefinished=true;stream.emit("prefinish")}}function finishMaybe(stream,state){var need=needFinish(state);if(need){if(state.pendingcb===0){prefinish(stream,state);state.finished=true;stream.emit("finish")}else{prefinish(stream,state)}}return need}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)nextTick(cb);else stream.once("finish",cb)}state.ended=true;stream.writable=false}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(err){var entry=_this.entry;_this.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next}if(state.corkedRequestsFree){state.corkedRequestsFree.next=_this}else{state.corkedRequestsFree=_this}}}inherits$1(Duplex,Readable);var keys$1=Object.keys(Writable.prototype);for(var v=0;v<keys$1.length;v++){var method=keys$1[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method]}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",onend)}function onend(){if(this.allowHalfOpen||this._writableState.ended)return;nextTick(onEndNT,this)}function onEndNT(self){self.end()}inherits$1(Transform$2,Duplex);function TransformState(stream){this.afterTransform=function(er,data){return afterTransform(stream,er,data)};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null;this.writeencoding=null}function afterTransform(stream,er,data){var ts=stream._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb)return stream.emit("error",new Error("no writecb in Transform class"));ts.writechunk=null;ts.writecb=null;if(data!==null&&data!==undefined)stream.push(data);cb(er);var rs=stream._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){stream._read(rs.highWaterMark)}}function Transform$2(options){if(!(this instanceof Transform$2))return new Transform$2(options);Duplex.call(this,options);this._transformState=new TransformState(this);var stream=this;this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==="function")this._transform=options.transform;if(typeof options.flush==="function")this._flush=options.flush}this.once("prefinish",function(){if(typeof this._flush==="function")this._flush(function(er){done(stream,er)});else done(stream)})}Transform$2.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding)};Transform$2.prototype._transform=function(chunk,encoding,cb){throw new Error("Not implemented")};Transform$2.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark)}};Transform$2.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)}else{ts.needTransform=true}};function done(stream,er){if(er)return stream.emit("error",er);var ws=stream._writableState;var ts=stream._transformState;if(ws.length)throw new Error("Calling transform done when ws.length != 0");if(ts.transforming)throw new Error("Calling transform done when still transforming");return stream.push(null)}inherits$1(PassThrough,Transform$2);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform$2.call(this,options)}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)};inherits$1(Stream,EventEmitter$4);Stream.Readable=Readable;Stream.Writable=Writable;Stream.Duplex=Duplex;Stream.Transform=Transform$2;Stream.PassThrough=PassThrough;Stream.Stream=Stream;function Stream(){EventEmitter$4.call(this)}Stream.prototype.pipe=function(dest,options){var source=this;function ondata(chunk){if(dest.writable){if(false===dest.write(chunk)&&source.pause){source.pause()}}}source.on("data",ondata);function ondrain(){if(source.readable&&source.resume){source.resume()}}dest.on("drain",ondrain);if(!dest._isStdio&&(!options||options.end!==false)){source.on("end",onend);source.on("close",onclose)}var didOnEnd=false;function onend(){if(didOnEnd)return;didOnEnd=true;dest.end()}function onclose(){if(didOnEnd)return;didOnEnd=true;if(typeof dest.destroy==="function")dest.destroy()}function onerror(er){cleanup();if(EventEmitter$4.listenerCount(this,"error")===0){throw er}}source.on("error",onerror);dest.on("error",onerror);function cleanup(){source.removeListener("data",ondata);dest.removeListener("drain",ondrain);source.removeListener("end",onend);source.removeListener("close",onclose);source.removeListener("error",onerror);dest.removeListener("error",onerror);source.removeListener("end",cleanup);source.removeListener("close",cleanup);dest.removeListener("close",cleanup)}source.on("end",cleanup);source.on("close",cleanup);dest.on("close",cleanup);dest.emit("pipe",source);return dest};var stream=Object.freeze({__proto__:null,"default":Stream,Readable:Readable,Writable:Writable,Duplex:Duplex,Transform:Transform$2,PassThrough:PassThrough,Stream:Stream});var require$$1$1=getAugmentedNamespace(stream);encodeStream.createEncodeStream=EncodeStream;var util$1=require$$0$1;var Transform$1=require$$1$1.Transform;var EncodeBuffer=encodeBuffer.EncodeBuffer;util$1.inherits(EncodeStream,Transform$1);var DEFAULT_OPTIONS$1={objectMode:true};function EncodeStream(options){if(!(this instanceof EncodeStream))return new EncodeStream(options);if(options){options.objectMode=true}else{options=DEFAULT_OPTIONS$1}Transform$1.call(this,options);var stream=this;var encoder=this.encoder=new EncodeBuffer(options);encoder.push=function(chunk){stream.push(chunk)}}EncodeStream.prototype._transform=function(chunk,encoding,callback){this.encoder.write(chunk);if(callback)callback()};EncodeStream.prototype._flush=function(callback){this.encoder.flush();if(callback)callback()};var decodeStream={};decodeStream.createDecodeStream=DecodeStream;var util=require$$0$1;var Transform=require$$1$1.Transform;var DecodeBuffer=decodeBuffer.DecodeBuffer;util.inherits(DecodeStream,Transform);var DEFAULT_OPTIONS={objectMode:true};function DecodeStream(options){if(!(this instanceof DecodeStream))return new DecodeStream(options);if(options){options.objectMode=true}else{options=DEFAULT_OPTIONS}Transform.call(this,options);var stream=this;var decoder=this.decoder=new DecodeBuffer(options);decoder.push=function(chunk){stream.push(chunk)}}DecodeStream.prototype._transform=function(chunk,encoding,callback){this.decoder.write(chunk);this.decoder.flush();if(callback)callback()};var ext={};ext.createCodec=codecBase.createCodec;var codec={};codec.codec={preset:codecBase.preset};msgpackLite.encode=encode$3.encode;msgpackLite.decode=decode$3.decode;msgpackLite.Encoder=encoder.Encoder;msgpackLite.Decoder=decoder.Decoder;msgpackLite.createEncodeStream=encodeStream.createEncodeStream;msgpackLite.createDecodeStream=decodeStream.createDecodeStream;msgpackLite.createCodec=ext.createCodec;msgpackLite.codec=codec.codec;const{encode,decode}=msgpackLite;const commonDefaults={encode,decode};var addDefaults=(options,specifics)=>Object.assign({},commonDefaults,specifics,options);const CLOSE_NORMAL=1000;var dist={};var EventEmitter$3={};Object.defineProperty(EventEmitter$3,"__esModule",{value:true});EventEmitter$3.default=EventEmitter$3.EventEmitter=EventEmitter$3.ANY=void 0;const ANY="*";EventEmitter$3.ANY=ANY;const EXTENSIONS=Symbol("[[Extensions]]");const assertInstance=(unknown,constructor,details="")=>{if(unknown instanceof constructor){return true}else{throw new TypeError(`Expected argument to be an instance of \`${constructor.name}\`, but instead got ${`an instance of \`${unknown.constructor.name}\``}. ${details}`.trim())}};class EventEmitter$2{constructor(options={}){assertInstance(options,Object);this[EXTENSIONS]={options,events:new Map}}addEventListener(event,callback){assertInstance(callback,Function);let callbacks=this[EXTENSIONS].events.get(event);if(!callbacks||!callbacks.size){callbacks=new Set;this[EXTENSIONS].events.set(event,callbacks)}if(!callbacks.has(callback)){callbacks.add(callback)}return this}on(event,callback){return this.addEventListener(event,callback)}once(event,callback){assertInstance(callback,Function);callback[EXTENSIONS]={once:true};return this.addEventListener(event,callback)}removeEventListeners(event){if(event){for(const[evt,callbacks]of this[EXTENSIONS].events){for(const callback of callbacks){if(event===evt){this.removeEventListener(evt,callback)}}}}else{for(const[event,callbacks]of this[EXTENSIONS].events){for(const callback of callbacks){if(event===ANY){this[EXTENSIONS].events.delete(event)}else{this.removeEventListener(event,callback)}}}}return this}removeEventListener(event,callback){if(event===ANY){this.removeEventListeners();return this}assertInstance(callback,Function,`No callback has been specified. If you'd like to remove all events of type ${event}, use removeEventListeners instead`);const callbacks=this[EXTENSIONS].events.get(event);if(!callbacks){return this}if(callbacks.has(callback)){callbacks.delete(callback)}if(!callbacks.size){this[EXTENSIONS].events.delete(event)}return this}off(event,callback){return this.removeEventListener(event,callback)}emit(event,...args){if(event!==ANY){this.emit(ANY,event,...args)}if(this[EXTENSIONS].options.inferListeners&&typeof event==="string"){let inferredListener=`on${event[0].toUpperCase()}${event.substr(1)}`;if(inferredListener==="on*"){inferredListener="onAny"}if(this[inferredListener]instanceof Function){this[inferredListener](...args)}}const callbacks=this[EXTENSIONS].events.get(event);if(callbacks){for(const callback of callbacks){callback(...args);if(callback[EXTENSIONS]&&callback[EXTENSIONS].once){this.removeEventListener(event,callback)}}}return this}}EventEmitter$3.EventEmitter=EventEmitter$2;var _default=EventEmitter$2;EventEmitter$3.default=_default;(function(exports){Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EventEmitter",{enumerable:true,get:function(){return _EventEmitter.default}});exports.default=void 0;var _EventEmitter=_interopRequireDefault(EventEmitter$3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_EventEmitter.default;exports.default=_default})(dist);var EventEmitterModule=getDefaultExportFromCjs(dist);var toStr$2=Object.prototype.toString;var isArguments=function isArguments(value){var str=toStr$2.call(value);var isArgs=str==="[object Arguments]";if(!isArgs){isArgs=str!=="[object Array]"&&value!==null&&typeof value==="object"&&typeof value.length==="number"&&value.length>=0&&toStr$2.call(value.callee)==="[object Function]"}return isArgs};var keysShim$1;if(!Object.keys){var has=Object.prototype.hasOwnProperty;var toStr$1=Object.prototype.toString;var isArgs$1=isArguments;var isEnumerable=Object.prototype.propertyIsEnumerable;var hasDontEnumBug=!isEnumerable.call({toString:null},"toString");var hasProtoEnumBug=isEnumerable.call(function(){},"prototype");var dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o};var excludedKeys={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true};var hasAutomationEqualityBug=function(){if(typeof window==="undefined"){return false}for(var k in window){try{if(!excludedKeys["$"+k]&&has.call(window,k)&&window[k]!==null&&typeof window[k]==="object"){try{equalsConstructorPrototype(window[k])}catch(e){return true}}}catch(e){return true}}return false}();var equalsConstructorPrototypeIfNotBuggy=function(o){if(typeof window==="undefined"||!hasAutomationEqualityBug){return equalsConstructorPrototype(o)}try{return equalsConstructorPrototype(o)}catch(e){return false}};keysShim$1=function keys(object){var isObject=object!==null&&typeof object==="object";var isFunction=toStr$1.call(object)==="[object Function]";var isArguments=isArgs$1(object);var isString=isObject&&toStr$1.call(object)==="[object String]";var theKeys=[];if(!isObject&&!isFunction&&!isArguments){throw new TypeError("Object.keys called on a non-object")}var skipProto=hasProtoEnumBug&&isFunction;if(isString&&object.length>0&&!has.call(object,0)){for(var i=0;i<object.length;++i){theKeys.push(String(i))}}if(isArguments&&object.length>0){for(var j=0;j<object.length;++j){theKeys.push(String(j))}}else{for(var name in object){if(!(skipProto&&name==="prototype")&&has.call(object,name)){theKeys.push(String(name))}}}if(hasDontEnumBug){var skipConstructor=equalsConstructorPrototypeIfNotBuggy(object);for(var k=0;k<dontEnums.length;++k){if(!(skipConstructor&&dontEnums[k]==="constructor")&&has.call(object,dontEnums[k])){theKeys.push(dontEnums[k])}}}return theKeys}}var implementation$3=keysShim$1;var slice=Array.prototype.slice;var isArgs=isArguments;var origKeys=Object.keys;var keysShim=origKeys?function keys(o){return origKeys(o)}:implementation$3;var originalKeys=Object.keys;keysShim.shim=function shimObjectKeys(){if(Object.keys){var keysWorksWithArguments=function(){var args=Object.keys(arguments);return args&&args.length===arguments.length}(1,2);if(!keysWorksWithArguments){Object.keys=function keys(object){if(isArgs(object)){return originalKeys(slice.call(object))}return originalKeys(object)}}}else{Object.keys=keysShim}return Object.keys||keysShim};var objectKeys=keysShim;var keys=objectKeys;var hasSymbols=typeof Symbol==="function"&&typeof Symbol("foo")==="symbol";var toStr=Object.prototype.toString;var concat=Array.prototype.concat;var origDefineProperty=Object.defineProperty;var isFunction=function(fn){return typeof fn==="function"&&toStr.call(fn)==="[object Function]"};var arePropertyDescriptorsSupported=function(){var obj={};try{origDefineProperty(obj,"x",{enumerable:false,value:obj});for(var _ in obj){return false}return obj.x===obj}catch(e){return false}};var supportsDescriptors=origDefineProperty&&arePropertyDescriptorsSupported();var defineProperty=function(object,name,value,predicate){if(name in object&&(!isFunction(predicate)||!predicate())){return}if(supportsDescriptors){origDefineProperty(object,name,{configurable:true,enumerable:false,value:value,writable:true})}else{object[name]=value}};var defineProperties$1=function(object,map){var predicates=arguments.length>2?arguments[2]:{};var props=keys(map);if(hasSymbols){props=concat.call(props,Object.getOwnPropertySymbols(map))}for(var i=0;i<props.length;i+=1){defineProperty(object,props[i],map[props[i]],predicates[props[i]])}};defineProperties$1.supportsDescriptors=!!supportsDescriptors;var defineProperties_1=defineProperties$1;if(typeof self!=="undefined"){module.exports=self}else if(typeof window!=="undefined"){module.exports=window}else if(typeof global$1!=="undefined"){module.exports=global$1}else{module.exports=Function("return this")()}var implementation$2=Object.freeze({__proto__:null});var require$$1=getAugmentedNamespace(implementation$2);var implementation$1=require("./implementation");module.exports=function getPolyfill(){if(typeof global$1!=="object"||!global$1||global$1.Math!==Math||global$1.Array!==Array){return implementation$1}return global$1};var polyfill$1=Object.freeze({__proto__:null});var require$$2=getAugmentedNamespace(polyfill$1);var define=defineProperties_1;var getPolyfill$1=require$$2;var shim$1=function shimGlobal(){var polyfill=getPolyfill$1();if(define.supportsDescriptors){var descriptor=Object.getOwnPropertyDescriptor(polyfill,"globalThis");if(!descriptor||descriptor.configurable&&(descriptor.enumerable||descriptor.writable||globalThis!==polyfill)){Object.defineProperty(polyfill,"globalThis",{configurable:true,enumerable:false,value:polyfill,writable:false})}}else if(typeof globalThis!=="object"||globalThis!==polyfill){polyfill.globalThis=polyfill}return polyfill};var defineProperties=defineProperties_1;var implementation=require$$1;var getPolyfill=require$$2;var shim=shim$1;var polyfill=getPolyfill();var getGlobal=function(){return polyfill};defineProperties(getGlobal,{getPolyfill:getPolyfill,implementation:implementation,shim:shim});var globalthis=getGlobal;class Instruction{constructor(command,...args){this.args=args;this.command=command;this.type=this.constructor.type;for(let i=0;i<args.length;++i){const arg=args[i];if(arg instanceof Error){args[i]={error:true,message:arg.message,stack:arg.stack}}}}}class SYN extends Instruction{}_defineProperty(SYN,"type",0);class ACK extends Instruction{}_defineProperty(ACK,"type",1);class SYN_ACK extends Instruction{}_defineProperty(SYN_ACK,"type",2);var empty={};var empty$1=Object.freeze({__proto__:null,"default":empty});var require$$0=getAugmentedNamespace(empty$1);var crypto=require$$0;var rng$1=function nodeRNG(){return crypto.randomBytes(16)};var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}function bytesToUuid$1(buf,offset){var i=offset||0;var bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}var bytesToUuid_1=bytesToUuid$1;var rng=rng$1;var bytesToUuid=bytesToUuid_1;function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options==="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii]}}return buf||bytesToUuid(rnds)}var v4_1=v4;class Message{constructor(instruction,options,id=v4_1()){this.id=id;this.instruction=instruction;this.options=options}makeReply(...args){let nextInstruction;const{instruction,options,id}=this;if(instruction instanceof SYN){nextInstruction=ACK}else if(instruction instanceof ACK){nextInstruction=SYN_ACK}else{throw new Error("Invalid attempt to reply to a reply")}return new Message(new nextInstruction(instruction.command,...args),options,id)}encode(){return this.options.encode({id:this.id,instruction:this.instruction})}static from(encoded,options){let preprocessed=encoded;if(encoded instanceof ArrayBuffer){preprocessed=new Uint8Array(encoded)}const object=options.decode(preprocessed);const{args,command,type}=object.instruction;const[constructor]=[SYN,ACK,SYN_ACK].filter(c=>c.type===type);const instruction=new constructor(command,...args);return new this(instruction,options,object.id)}}var resolve=(module,key="default")=>{return process.env.NODE_ENV==="test"?module:module[key]||module};const EventEmitter$1=resolve(EventEmitterModule);class Protocol extends EventEmitter$1{constructor(ws,options){super();_defineProperty(this,"internal",new EventEmitter$1);this.ws=ws;this.options=options}read(encoded){const message=Message.from(encoded,this.options);message.client=this;message.reply=(...args)=>{const replyMessage=message.makeReply(...args);return this.send(replyMessage)};const{instruction,id}=message;if(instruction instanceof SYN){const{command,args}=instruction;this.emit(command,message,...args);this.emit("message",command,message,...args)}if(instruction instanceof ACK||instruction instanceof SYN_ACK){this.internal.emit(id,message)}return message}send(message){return new Promise(resolve=>{const{id}=message;this.internal.once(id,reply=>{const{instruction}=reply;const{args}=instruction;resolve([reply,...args])});this.ws.send(message.encode())})}}class RemoteError extends Error{constructor(message,remoteStack){super(message);this.remoteStack=remoteStack}}var proxify=(around,{encode,decode,bind=false}={})=>new Proxy(around,{get:(target,property,receiver)=>{if(property==="inspect"||property===util$2.inspect.custom){return()=>{return target}}if(property==="then"){return receiver}const lookUp=target[property];if(!lookUp){return async(...args)=>{const remoteLookUp=new Message(new SYN(property,...args),{encode,decode});const[message,result]=await target.send(remoteLookUp);message.reply();if(result&&result.error&&result.message&&result.stack){throw new RemoteError(result.message,result.stack)}else{return result}}}else{if(bind&&lookUp instanceof Function){return lookUp.bind(target)}else{return lookUp}}}});const EventEmitter=resolve(EventEmitterModule);class Client extends EventEmitter{constructor(...args){super({inferListeners:true});_defineProperty(this,"ws",null);_defineProperty(this,"network",null);_defineProperty(this,"reconnecting",false);_defineProperty(this,"options",{});if(!args.length){throw new Error("No arguments provided")}const[url]=args;this.url=url;if(args.length===2){const[,arg2]=args;if(typeof arg2==="object"){this.options=arg2;this.protocols=null}else{this.protocols=arg2}}if(args.length===3){const[,protocols,options={}]=args;this.protocols=protocols;this.options=options}this.options=addDefaults(this.options,{autoReconnect:true,binaryType:"arraybuffer",engine:globalthis.WebSocket,reconnectionFactor:1.15,reconnectionMinimum:200});if(!this.options.engine){throw new Error("No WebSocket client implementation found. If your environment doesn't natively support WebSockets, please provide the client class to use with the `engine` option.")}this.proxy=proxify(this,Object.assign({},this.options,{bind:true}));return this.proxy}clear(e){this.emit("close",e);this.network=null;this.ws=null}open(){return new Promise((resolve,reject)=>{this.close().then(()=>{this.ws=new this.options.engine(this.url,this.protocols,this.options.engineOptions);this.ws.binaryType=this.options.binaryType;this.ws.onopen=e=>{this.emit("open",e);resolve(this.proxy)};this.ws.onerror=e=>{this.emit("error",e);reject(e)};this.ws.onclose=e=>{const{code}=e;this.clear(e);if(code!==CLOSE_NORMAL){if(this.options.autoReconnect&&!this.reconnecting){this.reconnect()}}};this.ws.onmessage=e=>this.network.read(e.data);this.network=new Protocol(this.ws,this.options);this.network.on("*",(...args)=>{this.emit(...args)})}).catch(reject)})}async reconnect(delay){this.reconnecting=true;const timeout=delay||this.options.reconnectionMinimum;try{await this.open();this.reconnecting=false;this.emit("reconnect")}catch(e){setTimeout(()=>{this.reconnect(timeout*this.options.reconnectionFactor)},timeout)}}close(){return new Promise(resolve=>{if(this.ws){this.ws.onclose=e=>{this.clear(e);resolve(this.proxy)};this.ws.close()}else{resolve(this.proxy)}})}async send(message){if(!this.network){throw new Error(`Attempted to send command "${message.instruction.command}" without a connection being established`)}return this.network.send(message)}}const client=new Client("ws://localhost:8080");(async()=>{await client.open();const six=await client.add(1,2,3);console.log(six)})();

